{"data":{"markdownRemark":{"html":"<p>写这篇文章的原因是看到一个网站 <a href=\"http://samvlu.com\">100 Days of Swift</a> ，这个网站里放着作者学习100天里所做的一些作品，如果有源码就更好了。这些作品，对我这个初学者来说可以说是很好的练手项目了。于是我准备去写这些作品中的一些效果，当然从简单开始啦，这个是那个网站的 PROJECT 10，以下是效果图（来自 100 Day of Swift）。</p>\n<p><img src=\"https://i.loli.net/2018/11/17/5befc2345ca3d.gif\" alt=\"pull to refresh table view\"></p>\n<!-- more -->\n<h1>正文</h1>\n<p>下拉后模拟一个加载的过程，加载结束后刷新 TableView 并停止 RefreshControl 转动。</p>\n<h2>设置导航栏颜色</h2>\n<p>在 AppDelegate 中设置导航栏颜色为白色：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {\n    // barTintColor 修改导航栏颜色\n    UINavigationBar.appearance().barTintColor = UIColor.whiteColor()\n    return true\n}</code></pre></div>\n<h2>导航栏图标、标题以及 RefreshControl</h2>\n<p>直接给出代码，已经写注释了：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import UIKit\n\nclass TableViewController: UITableViewController {\n\n    // 数据源\n    var dataSource = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        // Uncomment the following line to preserve selection between presentations\n        // self.clearsSelectionOnViewWillAppear = false\n\n        // Uncomment the following line to display an Edit button in the navigation bar for this view controller.\n        // self.navigationItem.rightBarButtonItem = self.editButtonItem()\n\n        // 设置导航栏左边图标\n        navigationItem.leftBarButtonItem = UIBarButtonItem(barButtonSystemItem: UIBarButtonSystemItem.Edit, target: nil, action: nil)\n        // 设置导航栏右边图标\n        navigationItem.rightBarButtonItem = UIBarButtonItem(barButtonSystemItem: UIBarButtonSystemItem.Add, target: nil, action: nil)\n        // 设置导航栏标题\n        navigationItem.title = &quot;Groceries&quot;\n        // 设定refreshControl\n        refreshControl = UIRefreshControl()\n        // refreshControl 激活时调用 handleRefresh\n        refreshControl?.addTarget(self, action: &quot;handleRefresh&quot;, forControlEvents: UIControlEvents.ValueChanged)\n    }\n\n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n        // Dispose of any resources that can be recreated.\n    }\n\n    func handleRefresh() {\n        let dispatchTime = dispatch_time(DISPATCH_TIME_NOW, Int64(2 * Double(NSEC_PER_SEC)))\n        // 两秒延迟调用模拟加载时间\n        dispatch_after(dispatchTime, dispatch_get_main_queue()) {\n            self.dataSource.append(&quot;g&quot;)\n            self.dataSource.append(&quot;h&quot;)\n            // 重载数据\n            self.tableView.reloadData()\n            // 停止动画\n            self.refreshControl?.endRefreshing()\n        }\n    }\n\n    // MARK: - Table view data source\n\n    override func numberOfSectionsInTableView(tableView: UITableView) -&gt; Int {\n        return 1\n    }\n\n    override func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {\n        return dataSource.count\n    }\n\n    override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell {\n        let cell = tableView.dequeueReusableCellWithIdentifier(&quot;cell&quot;, forIndexPath: indexPath)\n        // Configure the cell...\n        cell.textLabel?.text = dataSource[indexPath.row]\n\n        return cell\n    }\n\n}</code></pre></div>\n<p>那这次文章就结束了，还是比较简单的，有什么疑惑，或者我写了什么错误的地方，欢迎评论。</p>\n<h1>参考资料</h1>\n<ol>\n<li><a href=\"http://samvlu.com\">100 Days of Swift</a></li>\n</ol>","frontmatter":{"title":"下拉刷新 TableView","date":"January 31, 2016","tags":["技术","实践","开发","Swift","iOS"]},"fields":{"slug":"/pull-to-refresh-table-view/"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/pull-to-refresh-table-view/"}}