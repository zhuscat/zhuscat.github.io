webpackJsonp([59629371178587],{531:function(n,s){n.exports={data:{markdownRemark:{html:'<p>今天在写 <a href="https://github.com/zhuscat/react-koa-isomorphic-boilerplate">react-koa-isomorphic-boilerplate</a>，期间出现了一个问题，错误原因是 <code class="language-text">Property key of ObjectProperty expected node to be of a type [&quot;Identifier&quot;,&quot;StringLiteral&quot;,&quot;NumericLiteral&quot;] but instead got &quot;BooleanLiteral&quot;</code>，很快就找到错误所在的地方，但是一直不知道如何解决这个错误，然后通过各种尝试总算是解决了这个错误，但是还是不知道错误的根本原因是什么，找个时间研究一下，下面就详细介绍一下这个问题的解决办法吧。</p>\n<!-- more -->\n<h2>错误详情</h2>\n<div class="gatsby-highlight">\n      <pre class="language-shell"><code class="language-shell">TypeError: /Users/Leaf/Downloads/douban-book/webpack.development.config.js: Property key of ObjectProperty expected node to be of\n a <span class="token function">type</span> <span class="token punctuation">[</span><span class="token string">"Identifier"</span>,<span class="token string">"StringLiteral"</span>,<span class="token string">"NumericLiteral"</span><span class="token punctuation">]</span> but instead got <span class="token string">"BooleanLiteral"</span>\n    at validate <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-types/lib/definitions/index.js:109:13<span class="token punctuation">)</span>\n    at Object.validate <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-types/lib/definitions/core.js:505:63<span class="token punctuation">)</span>\n    at Object.validate <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-types/lib/index.js:511:9<span class="token punctuation">)</span>\n    at NodePath._replaceWith <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/path/replacement.js:176:7<span class="token punctuation">)</span>\n    at NodePath.replaceWith <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/path/replacement.js:160:8<span class="token punctuation">)</span>\n    at PluginPass.Identifier <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-plugin-inline-replace-variables/lib/index.js:2\n7:18<span class="token punctuation">)</span>\n    at newFn <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/visitors.js:276:21<span class="token punctuation">)</span>\n    at NodePath._call <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/path/context.js:76:18<span class="token punctuation">)</span>\n    at NodePath.call <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/path/context.js:48:17<span class="token punctuation">)</span>\n    at NodePath.visit <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/path/context.js:105:12<span class="token punctuation">)</span>\n    at TraversalContext.visitQueue <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:150:16<span class="token punctuation">)</span>\n    at TraversalContext.visitSingle <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:108:19<span class="token punctuation">)</span>\n    at TraversalContext.visit <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:192:19<span class="token punctuation">)</span>\n    at Function.traverse.node <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/index.js:114:17<span class="token punctuation">)</span>\n    at NodePath.visit <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/path/context.js:115:19<span class="token punctuation">)</span>\n    at TraversalContext.visitQueue <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:150:16<span class="token punctuation">)</span>\n    at TraversalContext.visitMultiple <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:103:17<span class="token punctuation">)</span>\n    at TraversalContext.visit <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:190:19<span class="token punctuation">)</span>\n    at Function.traverse.node <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/index.js:114:17<span class="token punctuation">)</span>\n    at NodePath.visit <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/path/context.js:115:19<span class="token punctuation">)</span>\n    at TraversalContext.visitQueue <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:150:16<span class="token punctuation">)</span>\n    at TraversalContext.visitMultiple <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:103:17<span class="token punctuation">)</span>\n    at TraversalContext.visit <span class="token punctuation">(</span>/Users/Leaf/Downloads/douban-book/node_modules/babel-traverse/lib/context.js:190:19<span class="token punctuation">)</span></code></pre>\n      </div>\n<h2>错误描述</h2>\n<p>我在 <code class="language-text">webpack</code> 配置里面使用了 <code class="language-text">DefinePlugin</code>，使用了 <code class="language-text">koa-webpack-middleware</code>，该配置作为开发模式下的配置，具有热更新的功能，整个配置如下：</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'fs\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'webpack\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'extract-text-webpack-plugin\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> extractStyle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">\'all.min.css\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> nodeModules <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token string">\'node_modules\'</span><span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">\'.bin\'</span><span class="token punctuation">,</span> <span class="token string">\'.npminstall\'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> clientConfig <span class="token operator">=</span> <span class="token punctuation">{</span>\n  devtool<span class="token punctuation">:</span> <span class="token string">\'cheap-source-map\'</span><span class="token punctuation">,</span>\n  entry<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'./client/index.js\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    path<span class="token punctuation">:</span> <span class="token string">\'public/build\'</span><span class="token punctuation">,</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'[name].js\'</span><span class="token punctuation">,</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'/build/\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.jsx?$/</span><span class="token punctuation">,</span>\n        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>\n        loader<span class="token punctuation">:</span> <span class="token string">\'babel\'</span><span class="token punctuation">,</span>\n        query<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'es2015\'</span><span class="token punctuation">,</span> <span class="token string">\'react\'</span><span class="token punctuation">,</span> <span class="token string">\'stage-0\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'transform-runtime\'</span><span class="token punctuation">,</span> <span class="token string">\'add-module-exports\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.scss$/</span><span class="token punctuation">,</span>\n        loader<span class="token punctuation">:</span> extractStyle<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'css\'</span><span class="token punctuation">,</span> <span class="token string">\'sass\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.woff2?$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000&amp;minetype=application/font-woff\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.ttf$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000&amp;minetype=application/octet-stream\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.eot$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'file\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.svg$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000&amp;minetype=image/svg+xml\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.(png|jpg|jpeg|gif|webp)$/i</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.json$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'json\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.html?$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'file?name=[name].[ext]\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'\'</span><span class="token punctuation">,</span> <span class="token string">\'.js\'</span><span class="token punctuation">,</span> <span class="token string">\'.jsx\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    extractStyle<span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>OccurenceOrderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>DedupePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      compress<span class="token punctuation">:</span> <span class="token punctuation">{</span> warnings<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      comments<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token string">\'process.env.NODE_ENV\'</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">\'production\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      __SERVER__<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      __CLIENT__<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> serverConfig <span class="token operator">=</span> <span class="token punctuation">{</span>\n  entry<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'./server/index.js\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'/dist\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'index.js\'</span><span class="token punctuation">,</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'/build/\'</span><span class="token punctuation">,</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'commonjs2\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  target<span class="token punctuation">:</span> <span class="token string">\'node\'</span><span class="token punctuation">,</span>\n  node<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    fs<span class="token punctuation">:</span> <span class="token string">\'empty\'</span><span class="token punctuation">,</span>\n    __dirname<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    __filename<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">function</span> <span class="token function">findExternals</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> request<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> pathStart <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">\'/\'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>pathStart <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>pathStart<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">\'!\'</span><span class="token punctuation">)</span> <span class="token operator">||</span> nodeModules<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>pathStart<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> request <span class="token operator">!==</span> <span class="token string">\'webpack/hot/signal.js\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">\'commonjs \'</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.jsx?$/</span><span class="token punctuation">,</span>\n        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>\n        loader<span class="token punctuation">:</span> <span class="token string">\'babel\'</span><span class="token punctuation">,</span>\n        query<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'es2015\'</span><span class="token punctuation">,</span> <span class="token string">\'react\'</span><span class="token punctuation">,</span> <span class="token string">\'stage-0\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n            <span class="token punctuation">[</span><span class="token string">\'babel-plugin-transform-require-ignore\'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n              extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'.css\'</span><span class="token punctuation">,</span> <span class="token string">\'.sass\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token string">\'add-module-exports\'</span><span class="token punctuation">,</span>\n            <span class="token string">\'transform-runtime\'</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.scss$/</span><span class="token punctuation">,</span>\n        loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.woff2?$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.ttf$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.eot$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.svg$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.(png|jpg|jpeg|gif|webp)$/i</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.json$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'json\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>OccurenceOrderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>DedupePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token string">\'process.env.NODE_ENV\'</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">\'production\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      __SERVER__<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      __CLIENT__<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>clientConfig<span class="token punctuation">,</span> serverConfig<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>经过排查，发现问题出在这两行，删除这两行就没事了</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript">__SERVER__<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n__CLIENT__<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></code></pre>\n      </div>\n<h2>错误解决</h2>\n<p>但是我需要这两个全局变量，最后发现给这两个变量加上引号就行了，如下：</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token string">\'__SERVER__\'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n<span class="token string">\'__CLIENT__\'</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></code></pre>\n      </div>\n<p>更正后的配置：</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'fs\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'webpack\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'extract-text-webpack-plugin\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> extractStyle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">\'all.min.css\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> nodeModules <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token string">\'node_modules\'</span><span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">\'.bin\'</span><span class="token punctuation">,</span> <span class="token string">\'.npminstall\'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> clientConfig <span class="token operator">=</span> <span class="token punctuation">{</span>\n  devtool<span class="token punctuation">:</span> <span class="token string">\'cheap-source-map\'</span><span class="token punctuation">,</span>\n  entry<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'./client/index.js\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    path<span class="token punctuation">:</span> <span class="token string">\'public/build\'</span><span class="token punctuation">,</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'[name].js\'</span><span class="token punctuation">,</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'/build/\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.jsx?$/</span><span class="token punctuation">,</span>\n        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>\n        loader<span class="token punctuation">:</span> <span class="token string">\'babel\'</span><span class="token punctuation">,</span>\n        query<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'es2015\'</span><span class="token punctuation">,</span> <span class="token string">\'react\'</span><span class="token punctuation">,</span> <span class="token string">\'stage-0\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'transform-runtime\'</span><span class="token punctuation">,</span> <span class="token string">\'add-module-exports\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.scss$/</span><span class="token punctuation">,</span>\n        loader<span class="token punctuation">:</span> extractStyle<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'css\'</span><span class="token punctuation">,</span> <span class="token string">\'sass\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.woff2?$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000&amp;minetype=application/font-woff\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.ttf$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000&amp;minetype=application/octet-stream\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.eot$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'file\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.svg$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000&amp;minetype=image/svg+xml\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.(png|jpg|jpeg|gif|webp)$/i</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.json$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'json\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.html?$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'file?name=[name].[ext]\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'\'</span><span class="token punctuation">,</span> <span class="token string">\'.js\'</span><span class="token punctuation">,</span> <span class="token string">\'.jsx\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    extractStyle<span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>OccurenceOrderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>DedupePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      compress<span class="token punctuation">:</span> <span class="token punctuation">{</span> warnings<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      comments<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token string">\'process.env.NODE_ENV\'</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">\'production\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      __SERVER__<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      __CLIENT__<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> serverConfig <span class="token operator">=</span> <span class="token punctuation">{</span>\n  entry<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'./server/index.js\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'/dist\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'index.js\'</span><span class="token punctuation">,</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'/build/\'</span><span class="token punctuation">,</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'commonjs2\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  target<span class="token punctuation">:</span> <span class="token string">\'node\'</span><span class="token punctuation">,</span>\n  node<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    fs<span class="token punctuation">:</span> <span class="token string">\'empty\'</span><span class="token punctuation">,</span>\n    __dirname<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    __filename<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">function</span> <span class="token function">findExternals</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> request<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> pathStart <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">\'/\'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>pathStart <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>pathStart<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">\'!\'</span><span class="token punctuation">)</span> <span class="token operator">||</span> nodeModules<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>pathStart<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> request <span class="token operator">!==</span> <span class="token string">\'webpack/hot/signal.js\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">\'commonjs \'</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.jsx?$/</span><span class="token punctuation">,</span>\n        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>\n        loader<span class="token punctuation">:</span> <span class="token string">\'babel\'</span><span class="token punctuation">,</span>\n        query<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'es2015\'</span><span class="token punctuation">,</span> <span class="token string">\'react\'</span><span class="token punctuation">,</span> <span class="token string">\'stage-0\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n            <span class="token punctuation">[</span><span class="token string">\'babel-plugin-transform-require-ignore\'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n              extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'.css\'</span><span class="token punctuation">,</span> <span class="token string">\'.sass\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token string">\'add-module-exports\'</span><span class="token punctuation">,</span>\n            <span class="token string">\'transform-runtime\'</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span> <span class="token regex">/\\.scss$/</span><span class="token punctuation">,</span>\n        loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.woff2?$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.ttf$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.eot$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.svg$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'null\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.(png|jpg|jpeg|gif|webp)$/i</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'url?limit=10000\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\\.json$/</span><span class="token punctuation">,</span> loader<span class="token punctuation">:</span> <span class="token string">\'json\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>OccurenceOrderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>DedupePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token string">\'process.env.NODE_ENV\'</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">\'production\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token string">\'__SERVER__\'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      <span class="token string">\'__CLIENT__\'</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>clientConfig<span class="token punctuation">,</span> serverConfig<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<h2>错误原因</h2>\n<p>目前不清楚会发生这种错误的原因是什么，我开发模式下的配置并没有加引号，但并不会出现错误，一切正常，我怀疑跟热更新组件有关，希望有高人指点，唯一欣慰的一点是问题解决了。</p>',
frontmatter:{title:'解决 Property key of ObjectProperty got "BooleanLiteral" 的问题',date:"January 04, 2017",tags:["实践","问题排查","Webpack","JavaScript","HMR"]},fields:{slug:"/solve-problem-property-key-of-objectproperty/"}}},pathContext:{slug:"/solve-problem-property-key-of-objectproperty/"}}}});
//# sourceMappingURL=path---posts-solve-problem-property-key-of-objectproperty-37fdcdba33471c79163d.js.map