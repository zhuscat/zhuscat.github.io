webpackJsonp([0xbf21fe03138],{474:function(n,a){n.exports={data:{markdownRemark:{html:'<p>这是一篇以前写的笔记。无聊放上来吧。</p>\n<!-- more -->\n<h1>CABasicAnimation</h1>\n<h2>一段展示了CABasicAnimation用法的代码</h2>\n<div class="gatsby-highlight">\n      <pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token builtin">UIKit</span>\n\n<span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token builtin">UIViewController</span> <span class="token punctuation">{</span>\n\n    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token comment">// Do any additional setup after loading the view, typically from a nib.</span>\n        <span class="token function">setupScaleLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n        <span class="token function">setupGroupLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">func</span> <span class="token function">setupScaleLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> scaleLayer <span class="token operator">=</span> <span class="token function">CALayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        scaleLayer<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token builtin">UIColor</span><span class="token punctuation">.</span><span class="token function">blueColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">CGColor</span>\n        scaleLayer<span class="token punctuation">.</span>frame <span class="token operator">=</span> <span class="token function">CGRect</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">)</span>\n        scaleLayer<span class="token punctuation">.</span>cornerRadius <span class="token operator">=</span> <span class="token number">10</span>\n\n        view<span class="token punctuation">.</span>layer<span class="token punctuation">.</span><span class="token function">addSublayer</span><span class="token punctuation">(</span>scaleLayer<span class="token punctuation">)</span>\n\n        <span class="token keyword">let</span> scaleAnimation <span class="token operator">=</span> <span class="token function">CABasicAnimation</span><span class="token punctuation">(</span>keyPath<span class="token punctuation">:</span> <span class="token string">"transform.scale"</span><span class="token punctuation">)</span>\n        scaleAnimation<span class="token punctuation">.</span>fromValue <span class="token operator">=</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">)</span>\n        scaleAnimation<span class="token punctuation">.</span>toValue <span class="token operator">=</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">1.5</span><span class="token punctuation">)</span>\n        scaleAnimation<span class="token punctuation">.</span>autoreverses <span class="token operator">=</span> <span class="token boolean">true</span>\n        scaleAnimation<span class="token punctuation">.</span>fillMode <span class="token operator">=</span> <span class="token constant">kCAFillModeForwards</span>\n        scaleAnimation<span class="token punctuation">.</span>repeatCount <span class="token operator">=</span> <span class="token constant">MAXFLOAT</span>\n        scaleAnimation<span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token number">0.8</span>\n\n        scaleLayer<span class="token punctuation">.</span><span class="token function">addAnimation</span><span class="token punctuation">(</span>scaleAnimation<span class="token punctuation">,</span> forKey<span class="token punctuation">:</span> <span class="token string">"scaleAnimation"</span><span class="token punctuation">)</span>\n\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">func</span> <span class="token function">setupGroupLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> groupLayer <span class="token operator">=</span> <span class="token function">CALayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        groupLayer<span class="token punctuation">.</span>frame <span class="token operator">=</span> <span class="token function">CGRect</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">)</span>\n        groupLayer<span class="token punctuation">.</span>cornerRadius <span class="token operator">=</span> <span class="token number">10</span>\n        groupLayer<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token builtin">UIColor</span><span class="token punctuation">.</span><span class="token function">yellowColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">CGColor</span>\n        view<span class="token punctuation">.</span>layer<span class="token punctuation">.</span><span class="token function">addSublayer</span><span class="token punctuation">(</span>groupLayer<span class="token punctuation">)</span>\n\n        <span class="token keyword">let</span> scaleAnimation <span class="token operator">=</span> <span class="token function">CABasicAnimation</span><span class="token punctuation">(</span>keyPath<span class="token punctuation">:</span> <span class="token string">"transform.scale"</span><span class="token punctuation">)</span>\n        scaleAnimation<span class="token punctuation">.</span>fromValue <span class="token operator">=</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">)</span>\n        scaleAnimation<span class="token punctuation">.</span>toValue <span class="token operator">=</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">1.5</span><span class="token punctuation">)</span>\n        scaleAnimation<span class="token punctuation">.</span>autoreverses <span class="token operator">=</span> <span class="token boolean">true</span>\n        scaleAnimation<span class="token punctuation">.</span>repeatCount <span class="token operator">=</span> <span class="token constant">MAXFLOAT</span>\n        scaleAnimation<span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token number">0.8</span>\n\n        <span class="token keyword">let</span> moveAnimation <span class="token operator">=</span> <span class="token function">CABasicAnimation</span><span class="token punctuation">(</span>keyPath<span class="token punctuation">:</span> <span class="token string">"position"</span><span class="token punctuation">)</span>\n        moveAnimation<span class="token punctuation">.</span>fromValue <span class="token operator">=</span> <span class="token function">NSValue</span><span class="token punctuation">(</span><span class="token builtin">CGPoint</span><span class="token punctuation">:</span> groupLayer<span class="token punctuation">.</span>position<span class="token punctuation">)</span>\n        moveAnimation<span class="token punctuation">.</span>toValue <span class="token operator">=</span> <span class="token function">NSValue</span><span class="token punctuation">(</span><span class="token builtin">CGPoint</span><span class="token punctuation">:</span> <span class="token function">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">320.0</span> <span class="token operator">-</span> <span class="token number">80.0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> groupLayer<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>\n        moveAnimation<span class="token punctuation">.</span>autoreverses <span class="token operator">=</span> <span class="token boolean">true</span>\n        moveAnimation<span class="token punctuation">.</span>repeatCount <span class="token operator">=</span> <span class="token constant">MAXFLOAT</span>\n        moveAnimation<span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token number">2</span>\n\n        <span class="token keyword">let</span> rotateAnimation <span class="token operator">=</span> <span class="token function">CABasicAnimation</span><span class="token punctuation">(</span>keyPath<span class="token punctuation">:</span> <span class="token string">"transform.rotation.x"</span><span class="token punctuation">)</span>\n        rotateAnimation<span class="token punctuation">.</span>fromValue <span class="token operator">=</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">)</span>\n        rotateAnimation<span class="token punctuation">.</span>toValue <span class="token operator">=</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">6.0</span> <span class="token operator">*</span> <span class="token function">Float</span><span class="token punctuation">(</span><span class="token constant">M_PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n        rotateAnimation<span class="token punctuation">.</span>autoreverses <span class="token operator">=</span> <span class="token boolean">true</span>\n        rotateAnimation<span class="token punctuation">.</span>repeatCount <span class="token operator">=</span> <span class="token constant">MAXFLOAT</span>\n        rotateAnimation<span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token number">2</span>\n\n        <span class="token keyword">let</span> groupAnnimation <span class="token operator">=</span> <span class="token function">CAAnimationGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        groupAnnimation<span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token number">2</span>\n        groupAnnimation<span class="token punctuation">.</span>autoreverses <span class="token operator">=</span> <span class="token boolean">true</span>\n        groupAnnimation<span class="token punctuation">.</span>animation<span class="token operator">|</span>s <span class="token operator">=</span> <span class="token punctuation">[</span>moveAnimation<span class="token punctuation">,</span> scaleAnimation<span class="token punctuation">,</span> rotateAnimation<span class="token punctuation">]</span>\n        groupAnnimation<span class="token punctuation">.</span>repeatCount <span class="token operator">=</span> <span class="token constant">MAXFLOAT</span>\n\n        groupLayer<span class="token punctuation">.</span><span class="token function">addAnimation</span><span class="token punctuation">(</span>groupAnnimation<span class="token punctuation">,</span> forKey<span class="token punctuation">:</span> <span class="token string">"groupAnnimation"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">didReceiveMemoryWarning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didReceiveMemoryWarning</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token comment">// Dispose of any resources that can be recreated.</span>\n\n\n    <span class="token punctuation">}</span>\n\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<h2>Key Path</h2>\n<table>\n<thead>\n<tr>\n<th>Structure Field</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>rotation.x</td>\n<td>The rotation, in radians, in the x axis.</td>\n</tr>\n<tr>\n<td>rotation.y</td>\n<td>The rotation, in radians, in the y axis.</td>\n</tr>\n<tr>\n<td>rotation.z</td>\n<td>The rotation, in radians, in the z axis.</td>\n</tr>\n<tr>\n<td>rotation</td>\n<td>The rotation, in radians, in the z axis.This is identical to setting the rotation.z field</td>\n</tr>\n<tr>\n<td>scale.x</td>\n<td>Scale factor for the x axis.</td>\n</tr>\n<tr>\n<td>scale.y</td>\n<td>Scale factor for the y axis.</td>\n</tr>\n<tr>\n<td>scale.z</td>\n<td>Scale factor for the z axis.</td>\n</tr>\n<tr>\n<td>scale</td>\n<td>Average of all three scale factors.</td>\n</tr>\n<tr>\n<td>translation.x</td>\n<td>Translate in the x axis.</td>\n</tr>\n<tr>\n<td>translation.y</td>\n<td>Translate in the y axis.</td>\n</tr>\n<tr>\n<td>translation.z</td>\n<td>Translate in the z axis.</td>\n</tr>\n<tr>\n<td>translation</td>\n<td>Translate in the x and y axis. Value is an NSSize or CGSize</td>\n</tr>\n</tbody>\n</table>\n<h2>Fill Mode</h2>\n<p><code class="language-text">fillMode</code>的作用就是决定当前对象过了非active时间段的行为. 比如动画开始之前,动画结束之后。如果是一个动画<code class="language-text">CAAnimation</code>,则需要将其<code class="language-text">removedOnCompletion</code>设置为<code class="language-text">NO</code>,要不然<code class="language-text">fillMode</code>不起作用. 下面来讲各个<code class="language-text">fillMode</code>的意义</p>\n<p><code class="language-text">kCAFillModeRemoved</code> 这个是默认值,也就是说当动画开始前和动画结束后,动画对layer都没有影响,动画结束后,layer会恢复到之前的状态</p>\n<p><code class="language-text">kCAFillModeForwards</code> 当动画结束后,layer会一直保持着动画最后的状态</p>\n<p><code class="language-text">kCAFillModeBackwards</code> 这个和<code class="language-text">kCAFillModeForwards</code>是相对的,就是在动画开始前,你只要将动画加入了一个layer,layer便立即进入动画的初始状态并等待动画开始.你可以这样设定测试代码,将一个动画加入一个layer的时候延迟5秒执行.然后就会发现在动画没有开始的时候,只要动画被加入了layer,layer便处于动画初始状态</p>\n<p><code class="language-text">kCAFillModeBoth</code> 理解了上面两个,这个就很好理解了,这个其实就是上面两个的合成.动画加入后开始之前,layer便处于动画初始状态,动画结束后layer保持动画最后的状态.</p>\n<h1>CAKeyFrameAnimation</h1>\n<h2>一段展示了CAKeyFrameAnimation用法的代码</h2>\n<div class="gatsby-highlight">\n      <pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token builtin">UIKit</span>\n\n<span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token builtin">UIViewController</span> <span class="token punctuation">{</span>\n\n    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token comment">// Do any additional setup after loading the view, typically from a nib.</span>\n        <span class="token function">setupRectLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">func</span> <span class="token function">setupRectLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> rectLayer <span class="token operator">=</span> <span class="token function">CALayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        rectLayer<span class="token punctuation">.</span>frame <span class="token operator">=</span> <span class="token function">CGRect</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">)</span>\n        rectLayer<span class="token punctuation">.</span>cornerRadius <span class="token operator">=</span> <span class="token number">15</span>\n        rectLayer<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token builtin">UIColor</span><span class="token punctuation">.</span><span class="token function">blackColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">CGColor</span>\n        view<span class="token punctuation">.</span>layer<span class="token punctuation">.</span><span class="token function">addSublayer</span><span class="token punctuation">(</span>rectLayer<span class="token punctuation">)</span>\n\n        <span class="token keyword">let</span> rectRunAnimation <span class="token operator">=</span> <span class="token function">CAKeyframeAnimation</span><span class="token punctuation">(</span>keyPath<span class="token punctuation">:</span> <span class="token string">"position"</span><span class="token punctuation">)</span>\n\n        rectRunAnimation<span class="token punctuation">.</span>values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">NSValue</span><span class="token punctuation">(</span><span class="token builtin">CGPoint</span><span class="token punctuation">:</span> rectLayer<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSValue</span><span class="token punctuation">(</span><span class="token builtin">CGPoint</span><span class="token punctuation">:</span> <span class="token function">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">320</span> <span class="token operator">-</span> <span class="token number">15</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> rectLayer<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSValue</span><span class="token punctuation">(</span><span class="token builtin">CGPoint</span><span class="token punctuation">:</span> <span class="token function">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">320</span> <span class="token operator">-</span> <span class="token number">15</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> rectLayer<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSValue</span><span class="token punctuation">(</span><span class="token builtin">CGPoint</span><span class="token punctuation">:</span> <span class="token function">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> rectLayer<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSValue</span><span class="token punctuation">(</span><span class="token builtin">CGPoint</span><span class="token punctuation">:</span> rectLayer<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">]</span>\n\n        rectRunAnimation<span class="token punctuation">.</span>keyTimes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSNumber</span><span class="token punctuation">(</span>float<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">]</span>\n\n        rectRunAnimation<span class="token punctuation">.</span>timingFunctions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">CAMediaTimingFunction</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token constant">kCAMediaTimingFunctionEaseInEaseOut</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">CAMediaTimingFunction</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token constant">kCAMediaTimingFunctionLinear</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">CAMediaTimingFunction</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token constant">kCAMediaTimingFunctionLinear</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">CAMediaTimingFunction</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token constant">kCAMediaTimingFunctionLinear</span><span class="token punctuation">)</span><span class="token punctuation">]</span>\n\n        rectRunAnimation<span class="token punctuation">.</span>repeatCount <span class="token operator">=</span> <span class="token number">1000</span>\n        rectRunAnimation<span class="token punctuation">.</span>autoreverses <span class="token operator">=</span> <span class="token boolean">false</span>\n        rectRunAnimation<span class="token punctuation">.</span>calculationMode <span class="token operator">=</span> <span class="token constant">kCAAnimationLinear</span>\n        rectRunAnimation<span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token number">4</span>\n        rectLayer<span class="token punctuation">.</span><span class="token function">addAnimation</span><span class="token punctuation">(</span>rectRunAnimation<span class="token punctuation">,</span> forKey<span class="token punctuation">:</span> <span class="token string">"rectRunAnimation"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">didReceiveMemoryWarning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didReceiveMemoryWarning</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token comment">// Dispose of any resources that can be recreated.</span>\n\n\n    <span class="token punctuation">}</span>\n\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<h2>values属性</h2>\n<p>指明关键帧的点</p>\n<h2>path</h2>\n<p>也可以给animation设置<code class="language-text">path</code>,设置path会覆盖<code class="language-text">values</code></p>\n<h2>keyTimes</h2>\n<h2>timeFunctions</h2>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">kCAMediaTimingFunctionLinear\n\nkCAMediaTimingFunctionEaseIn\nkCAMediaTimingFunctionEaseOut\nkCAMediaTimingFunctionEaseInEaseOut\nkCAMediaTimingFunctionDefault</code></pre>\n      </div>\n<h2>calculationMode</h2>\n<ol>\n<li><code class="language-text">kCAAnimationLinear</code> 线性，默认</li>\n</ol>\n<ol start="2">\n<li><code class="language-text">kCAAnimationDiscrete</code> 离散，<code class="language-text">keyTimes</code>依旧有效</li>\n<li><code class="language-text">kCAAnimationPaced</code> 平均，<code class="language-text">keyTimes</code>跟<code class="language-text">timeFunctions</code>失效</li>\n<li><code class="language-text">kCAAnimationCubic</code> 平均</li>\n<li><code class="language-text">kCAAnimationCubicPaced</code> 平均</li>\n</ol>\n<h1>实现暂停开始的代码</h1>\n<h2>代码展示</h2>\n<div class="gatsby-highlight">\n      <pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function">pauseLayer</span><span class="token punctuation">(</span>layer<span class="token punctuation">:</span> <span class="token builtin">CALayer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> pausedTime <span class="token operator">=</span> layer<span class="token punctuation">.</span><span class="token function">convertTime</span><span class="token punctuation">(</span><span class="token function">CACurrentMediaTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fromLayer<span class="token punctuation">:</span> <span class="token constant">nil</span><span class="token punctuation">)</span>\n    layer<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">0.0</span>\n    layer<span class="token punctuation">.</span>timeOffset <span class="token operator">=</span> pausedTime\n<span class="token punctuation">}</span>\n\n<span class="token keyword">func</span> <span class="token function">resumeLayer</span><span class="token punctuation">(</span>layer<span class="token punctuation">:</span> <span class="token builtin">CALayer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> pausedTime <span class="token operator">=</span> layer<span class="token punctuation">.</span>timeOffset\n    layer<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">1.0</span>\n    layer<span class="token punctuation">.</span>timeOffset <span class="token operator">=</span> <span class="token number">0.0</span>\n    layer<span class="token punctuation">.</span>beginTime <span class="token operator">=</span> <span class="token number">0.0</span>\n    <span class="token keyword">let</span> timeSincePause <span class="token operator">=</span> layer<span class="token punctuation">.</span><span class="token function">convertTime</span><span class="token punctuation">(</span><span class="token function">CACurrentMediaTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fromLayer<span class="token punctuation">:</span> <span class="token constant">nil</span><span class="token punctuation">)</span> <span class="token operator">-</span> pausedTime\n    layer<span class="token punctuation">.</span>beginTime <span class="token operator">=</span> timeSincePause\n\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<h2>关于暂停开始动画两个函数的理解</h2>\n<p>暂停的时候，记录下暂停的时间，把layer的速度设置成了0.0，这样的话附加在layer上面的动画速度也变成了0.0，时间停止走动。</p>\n<p>接着给layer一个timeOffset,可以让layer停在那个时刻。</p>\n<p>重新开始动画，把layer的speed设置成1.0，layer的时间又可以开始走了，然后重设timeOffset和beginTime，接着计算出上次暂停到现在调用函数的时间，把layer的beginTime设置成这段时间。</p>\n<p>这里就是我久久不能理解的地方，现在我的理解是：</p>\n<p>假设暂停了动画，时间走过6个单位后，重新开始动画，那么，就会将beginTime设置成6个单位，beginTime是相对于父级的时间，意思就是相对父级6个单位之后进行动画。而此时父级已经走过了6个单位，于是直接接着播放动画。</p>\n<h1>执行动画的细节</h1>\n<p>要在添加动画之前对动画的各个属性进行设置，一旦添加了动画再进行设置就没有用了</p>\n<p>给Layer添加动画的时候，会对动画执行一次拷贝，执行的动画是那份拷贝。</p>\n<h1>CATransform3D</h1>\n<h2>CATransform3DMakeRotation</h2>\n<p><code class="language-text">CATransform3DMakeRotation</code>总是按最短路径来选择，当顺时针和逆时针的路径相同时，使用逆时针。若需要使其按顺时针旋转，用<code class="language-text">CAKeyframeAnimation</code>并在顺时针路径上增加几个关键点即可。</p>',
frontmatter:{title:"CAAnimation",date:"June 24, 2016",tags:["学习笔记","技术","开发","Swift","iOS"]},fields:{slug:"/caanimation/"}}},pathContext:{slug:"/caanimation/"}}}});
//# sourceMappingURL=path---posts-caanimation-b2afb46dc1d39c5c0acb.js.map