<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="ZhusCafe">
<meta property="og:url" content="http://zhuscat.com/index.html">
<meta property="og:site_name" content="ZhusCafe">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZhusCafe">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://zhuscat.com/"/>





  <title> ZhusCafe </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-83257887-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ZhusCafe</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/07/18/thoughts-on-styled-components/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/18/thoughts-on-styled-components/" itemprop="url">
                  Thoughts on Styled Components
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-18T08:34:06+08:00">
                2017-07-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æƒ³æ³•/" itemprop="url" rel="index">
                    <span itemprop="name">æƒ³æ³•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/07/18/thoughts-on-styled-components/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/07/18/thoughts-on-styled-components/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>éšç€ç»„ä»¶åŒ–çš„ç››è¡Œï¼Œä¸€äº›äººå¼€å§‹ä½¿ç”¨ CSS in JS çš„æ–¹æ¡ˆï¼Œç›®å‰æ¯”è¾ƒæµè¡Œçš„å°±æ˜¯ Styled Componentsï¼Œä¸ºä»€ä¹ˆè¿™ç§æ–¹æ¡ˆä¼šè¢«ä¸€äº›äººæ¥å—å¹¶ä½¿ç”¨å‘¢ï¼Ÿæˆ‘æƒ³ä»åŠ¨æœºå‡ºå‘è°ˆè°ˆè¿™ä¸ªæ–¹æ¡ˆã€‚</p>
<p>åœ¨ç»„ä»¶åŒ–çš„æ€ç»´ä¸‹ï¼Œå¾ˆå¤šäººä¼šå‘ç°ï¼Œè‡ªå·±å†™çš„æ ·å¼åªä¼šåœ¨æŸä¸ªç»„ä»¶ä¸‹ä½¿ç”¨ï¼Œæ¯”å¦‚æˆ‘å†™äº†ä¸€ä¸ªç‰¹å®šçš„ Buttonï¼Œé‚£ä¹ˆè¿™äº›æ ·å¼åªä¼šåœ¨è¿™ä¸ª Button ä¸‹ä½¿ç”¨ï¼Œè¿™ä¸ªæ ·å¼ä¸ä¼šç»™ä¸€ä¸ªåˆ—è¡¨é¡¹ï¼Œä¸ä¼šç»™ä¸€ä¸ªæ ‡é¢˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹é¢è¿™ç§ä»£ç æ˜¯å¾ˆå¸¸è§çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">className</span>=<span class="string">"btn"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">className</span>=<span class="string">"btn btn--primary"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¿™å°±å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘½åæˆ‘çš„æ ·å¼åªä¼šç»™ä¸€ä¸ªç‰¹å®šçš„ç»„ä»¶ä½¿ç”¨ï¼Œæˆ‘å´è¦ç»´æŠ¤ä»ç»„ä»¶åˆ°æ ·å¼å…³ç³»çš„ä¸€ä¸ªæ˜ å°„å‘¢ï¼Ÿèƒ½ä¸èƒ½å»é™¤è¿™ä¸€å±‚å…³ç³»ï¼Ÿ</p>
<p>æ ¹æ® Styled Components çš„æ–¹æ¡ˆï¼Œæœ€ç»ˆä»£ç å°±ä¼šå˜æˆä¸‹é¢è¿™æ ·</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">primary</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ª CSS in JS çš„ä¼˜ç‚¹æ˜¯ï¼Œå¯ä»¥å‘æŒ¥å‡º JS çš„åŠ›é‡ã€‚æ¯”å¦‚è¯´å˜é‡ï¼Œå¾ªç¯ç­‰ç­‰ï¼Œè¿™äº›èƒ½åŠ›å…¨éƒ¨ç»Ÿç»Ÿæ‹¥æœ‰ï¼Œä¸å†éœ€è¦ Lessï¼ŒSass ç­‰ç­‰ CSS é¢„ç¼–è¯‘å™¨äº†ã€‚</p>
<p>è‡³äº CSS in JSï¼Œè¿™é‡Œç‰¹æŒ‡ Styled Components è¿™ç§æ–¹æ¡ˆåˆ°åº•å¥½ä¸å¥½ï¼Œè¿™é‡Œå°±ä»è€…è§ä»ï¼Œæ™ºè€…è§æ™ºäº†ã€‚è™½ç„¶ç›®å‰æˆ‘è¿˜æ²¡æœ‰ç”¨åˆ°å®è·µä¸­å»ï¼Œä½†æˆ‘è®¤ä¸ºè¿™ç§æ–¹æ¡ˆè¿˜æ˜¯ä¸é”™çš„ã€‚</p>
<p>é¦–å…ˆï¼Œ Styled Components å¹¶ä¸æ˜¯è®©æˆ‘ä»¬å»å†™ä¸€ä¸ªç±»ä¼¼ <code>style</code> å¯¹è±¡çš„ä¸œè¥¿ï¼Œåœ¨ Styled Components ä¸­ï¼Œæˆ‘ä»¬æ‰€å†™éƒ½æ˜¯æ ‡å‡†çš„ CSS è¯­æ³•ï¼Œç”šè‡³æ”¯æŒ CSS åŠ¨ç”»ï¼Œåª’ä½“æŸ¥è¯¢ç­‰ï¼Œæ ¹æ® Styled Components çš„åŸç†ï¼Œå…¶æœ€ç»ˆä¹Ÿæ˜¯ç”Ÿæˆä¸€ä¸ªç±»æ’å…¥åˆ° <code>head</code> é‡Œé¢å»ã€‚</p>
<p>å¦å¤–ï¼Œæœ‰äº† JS çš„å¸®åŠ©ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¥æœ‰é‚£äº› CSS é¢„å¤„ç†å™¨æ‹¥æœ‰çš„å¤§éƒ¨åˆ†åŠŸèƒ½ã€‚</p>
<p>å¦å¤–ï¼ŒStyled Components æ‰€æä¾›çš„ä¸€ä¸ª <code>ThemeProvider</code> å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å®šåˆ¶ä¸»é¢˜ï¼Œå…ˆçœ‹ä¸€ä¸‹ç°åœ¨ä¸»æµçš„ç»„ä»¶åº“æ˜¯æ€ä¹ˆå®šåˆ¶ä¸»é¢˜çš„ï¼Œä»¥ Ant Design ä¸ºä¾‹ï¼Œè¦å®šåˆ¶ä¸»é¢˜ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯åœ¨ <code>package.json</code> ä¸­æŒ‡å®š <code>theme</code> å­—æ®µï¼Œå½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å­—æ®µï¼Œéœ€è¦<a href="https://ant.design/docs/react/customize-theme-cn" target="_blank" rel="external">ç›¸å…³çš„å·¥å…·</a>å»å¯¹å…¶è¿›è¡Œè§£æ ï¼Œå¦ä¸€ç§æ–¹å¼å°±æ˜¯è¦†ç›– less å˜é‡ï¼Œä¸ç®¡å“ªç§æ–¹å¼ï¼Œéƒ½ä¸æ˜¾å¾—é‚£ä¹ˆç®€æ´ã€‚ä½†æ˜¯ä½¿ç”¨ Styled Componentsï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ <code>ThemeProvider</code> ä¸­æä¾›ç›¸å…³å˜é‡å°±å¥½äº†ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªç»„ä»¶åº“å¯¹å¤–æä¾›çš„æ˜¯ JS æ¨¡å—ï¼Œæˆ‘ä»¬ä½¿ç”¨ JS å¯¹å…¶è¿›è¡Œé…ç½®ï¼Œåœ¨é…ç½®çš„ä¾¿æ·æ€§ä¸Šé«˜äº†å¾ˆå¤šã€‚</p>
<p>å½“ç„¶ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºè¿™ç§æ–¹æ¡ˆä¸å¤Ÿå¥½ï¼Œæ¯”å¦‚ <a href="https://medium.com/@gajus/stop-using-css-in-javascript-for-web-development-fa32fb873dcc" target="_blank" rel="external">Stop using CSS in JavaScript for web development â€“ Gajus Kuizinas â€“ Medium</a></p>
<p>è€Œæˆ‘èƒ½æƒ³åˆ°çš„å‡ ä¸ªç¼ºç‚¹æ˜¯ï¼š</p>
<ol>
<li>JS ä¸ CSS æ— æ³•åˆ†ç¦»æˆä¸¤ä¸ªæ–‡ä»¶ï¼Œå®é™…ä¸­å¯èƒ½ä¼šæœ‰ JS æ”¹å˜ä½† CSS ä¸å˜çš„æƒ…å½¢ï¼Œè¿™æ ·çš„è¯ï¼Œæ— æ³•æœ‰æ•ˆåˆ©ç”¨ç¼“å­˜ã€‚</li>
<li><del>å¦å¤–å°±æ˜¯è¦†å†™æ ·å¼ä¸æ–¹ä¾¿ï¼Œè™½ç„¶ä¸Šé¢æˆ‘å¤¸èµäº†ä¸‹ Styled Components çš„ä¸»é¢˜å®šåˆ¶åŠŸèƒ½ï¼Œä½†æ˜¯å¯¹äºä¸€äº›ç²¾ç»†çš„æ ·å¼æ”¹å˜å¯èƒ½å°±ä¼šæ˜¾å¾—ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚è¯´æˆ‘æœ‰ä¸€ä¸ªç»„ä»¶åº“ï¼Œé‡Œé¢åˆä¸€ä¸ª Table ç»„ä»¶ï¼Œæˆ‘å¯èƒ½ä¼šæƒ³æ”¹å˜ Table ç»„ä»¶ä¸‹ä¸€è¡Œçš„è¾¹æ¡†ï¼Œé«˜åº¦ï¼Œé¢œè‰²ç­‰ç­‰ç­‰ç­‰ã€‚è¿™ä¸ªæ—¶å€™å¿…é¡»æš´éœ²ä¸€äº› props å‡ºæ¥ï¼Œä½†æ˜¾ç„¶æ— æ³•ç…§é¡¾åˆ°æ–¹æ–¹é¢é¢ã€‚è€Œä½¿ç”¨ä¼ ç»Ÿæ–¹æ¡ˆåªéœ€è¦æ‰¾åˆ°ä¸€è¡Œçš„é‚£ä¸ªç±»åå°±è¡Œæ ·å¼è¦†å†™å°±å¥½ã€‚</del> å‘ç° Styled Components åŒæ ·å¯ä»¥å®šä¹‰ç”Ÿæˆçš„ç±»åï¼Œä½†æˆ‘ä¸çŸ¥é“é€šè¿‡è¿™ç§æ–¹å¼å†å»å†™å¯¹åº”ç±»åçš„ CSS å¥½ä¸å¥½ï¼Œå‡å¦‚ä½¿ç”¨äº† Styled Componentsï¼Œæˆ‘è‚¯å®šä¸æƒ³å†å†™å¯¹åº”çš„ CSSï¼Œè¿™æ ·æ„Ÿè§‰æœ‰äº›æ··ä¹±ã€‚</li>
</ol>
<h2 id="æ·±å…¥é˜…è¯»"><a href="#æ·±å…¥é˜…è¯»" class="headerlink" title="æ·±å…¥é˜…è¯»"></a>æ·±å…¥é˜…è¯»</h2><ol>
<li><a href="https://github.com/styled-components/polished" target="_blank" rel="external">GitHub - styled-components/polished: A lightweight toolset for writing styles in JavaScript âœ¨</a></li>
<li><a href="https://github.com/styled-components/styled-components" target="_blank" rel="external">GitHub - styled-components/styled-components: Visual primitives for the component age ğŸ’…</a></li>
<li><a href="https://www.youtube.com/watch?v=EkPcGS4TzdQ" target="_blank" rel="external">Ryanâ€™s Random Thoughts on Inline Styles - YouTube</a></li>
<li><a href="https://www.youtube.com/watch?v=XR6eM_5pAb0" target="_blank" rel="external">ColdFront16 â€¢ Glenn Maddern: The Future of Reusable CSS - YouTube</a></li>
<li><a href="https://github.com/hax/hax.github.com/issues/22" target="_blank" rel="external">å¦‚ä½•çœ‹å¾…ã€ŠReact: CSS in JSã€‹ï¼Ÿ Â· Issue #22 Â· hax/hax.github.com Â· GitHub</a></li>
<li><a href="https://medium.com/@gajus/stop-using-css-in-javascript-for-web-development-fa32fb873dcc" target="_blank" rel="external">Stop using CSS in JavaScript for web development â€“ Gajus Kuizinas â€“ Medium</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/07/14/does-tree-shaking-work/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/14/does-tree-shaking-work/" itemprop="url">
                  Tree Shaking çœŸçš„æœ‰æ•ˆå—
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-14T23:40:17+08:00">
                2017-07-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å­¦ä¹ ç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä¹ ç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/07/14/does-tree-shaking-work/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/07/14/does-tree-shaking-work/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å…¶å® Tree Shaking å‡ºæ¥å·²ç»æŒºä¹…äº†ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æœ€è¿‘æ‰äº†è§£çš„ã€‚</p>
<p>Tree Shaking æ˜¯ä¸€ä¸ªåœ¨ Rollup ä¸­æå‡ºçš„æ¦‚å¿µï¼Œä¹‹ååœ¨ webpack 2 ä¸­ä¹Ÿå¾—åˆ°äº†å®ç°ã€‚å…¶ä½œç”¨æ˜¯ï¼Œæ¯”å¦‚è¯´æˆ‘ä¾èµ–äºæŸä¸ªæ¨¡å—çš„ä¸€éƒ¨åˆ†ï¼Œä½¿ç”¨ Tree Shaking å¯ä»¥åªå¼•å…¥æˆ‘ä¾èµ–çš„é‚£éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†å¯ä»¥å»æ‰ã€‚</p>
<p>è¿™å¬èµ·æ¥ååˆ†ç¾å¥½ï¼Œç„¶è€Œï¼ŒTree Shaking çœŸçš„æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¥½å—ï¼Ÿ</p>
<p>å…ˆæ‹¿ Rollup ä¸€ä¸ªå®˜æ–¹ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// main.js</span></div><div class="line"><span class="keyword">import</span> &#123; cube &#125; <span class="keyword">from</span> <span class="string">'./maths.js'</span>;</div><div class="line"><span class="built_in">console</span>.log( cube( <span class="number">5</span> ) ); <span class="comment">// 125</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// maths.js</span></div><div class="line"><span class="comment">// This function isn't used anywhere, so</span></div><div class="line"><span class="comment">// Rollup excludes it from the bundle...</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">square</span> (<span class="params"> x </span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> x * x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// This function gets included</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">cube</span> (<span class="params"> x </span>) </span>&#123;</div><div class="line">	<span class="comment">// rewrite this as `square( x ) * x`</span></div><div class="line">	<span class="comment">// and see what happens!</span></div><div class="line">	<span class="keyword">return</span> x * x * x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€ç»ˆå¯ä»¥æ‰“åŒ…å‡ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line"><span class="comment">// This function isn't used anywhere, so</span></div><div class="line"><span class="comment">// Rollup excludes it from the bundle...</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// This function gets included</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cube</span> (<span class="params"> x </span>) </span>&#123;</div><div class="line">	<span class="comment">// rewrite this as `square( x ) * x`</span></div><div class="line">	<span class="comment">// and see what happens!</span></div><div class="line">	<span class="keyword">return</span> x * x * x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( cube( <span class="number">5</span> ) ); <span class="comment">// 125</span></div></pre></td></tr></table></figure>
<p>çœ‹ï¼Œ<code>square</code> å‡½æ•°æ²¡æœ‰è¢«æ‰“åŒ…è¿›æ¥ã€‚</p>
<p>ç„¶è€Œï¼Œæƒ³è¦ä½¿å…¶å¤±æ•ˆä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘åœ¨ <code>maths.js</code> æ¨¡å—ä¸­å†åŠ ä¸€å¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">decorate(square)</div></pre></td></tr></table></figure>
<p>å…ˆä¸ç®¡ <code>decorate</code> å‡½æ•°æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæœ€ç»ˆæ‰“åŒ…å‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line"><span class="comment">// This function isn't used anywhere, so</span></div><div class="line"><span class="comment">// Rollup excludes it from the bundle...</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">square</span> (<span class="params"> x </span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> x * x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// This function gets included</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cube</span> (<span class="params"> x </span>) </span>&#123;</div><div class="line">	<span class="comment">// rewrite this as `square( x ) * x`</span></div><div class="line">	<span class="comment">// and see what happens!</span></div><div class="line">	<span class="keyword">return</span> x * x * x;</div><div class="line">&#125;</div><div class="line"></div><div class="line">decorate(square);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( cube( <span class="number">5</span> ) ); <span class="comment">// 125</span></div></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œ<code>square</code> å·²ç»è¢«å®Œæ•´æ‰“åŒ…è¿›æ¥äº†ã€‚ä¸ºä»€ä¹ˆï¼Ÿå¦‚æœ <code>decorate</code> åªæ˜¯å¯¹ <code>square</code> å‡½æ•°è¿›è¡Œä¸€äº›æ”¹å˜è¿˜å¥½ï¼Œä½†å¦‚æœ <code>decorate</code> å‡½æ•°åšäº†å…¶ä»–äº‹æƒ…å‘¢ï¼Ÿ</p>
<p>æ¯”å¦‚è¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">decorate</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">Array</span>.prototype.count = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.length &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡å¦‚ä¸æ‰“åŒ… <code>square</code>ï¼Œåç»­ä»£ç å¦‚æœç”¨åˆ°äº† <code>Array.prototype.count</code> è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>å› æ­¤ï¼ŒRollup åªèƒ½è®² <code>square</code> æ‰“åŒ…è¿›æ¥ï¼Œå°†è¿™ä¸ªä¾‹å­æ”¾åˆ° <code>webpack</code> é‡Œé¢è®²ä¹ŸåŒæ ·é€‚ç”¨ã€‚</p>
<p>æ‰€ä»¥ï¼ŒTree Shaking å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆæœ‰æ•ˆã€‚</p>
<p>Tree Shaking éœ€è¦æ¨¡å—æ˜¯ ES6 æ¨¡å—ï¼Œç°åœ¨å¾ˆå¤šç¬¬ä¸‰æ–¹æ¨¡å—éƒ½æ˜¯ CommonJS æ¨¡å—ï¼Œå¯¹è¿™äº›æ¨¡å—ï¼Œæ— æ³•ä½¿ç”¨ Tree Shaking å¯¹å…¶è¿›è¡Œæ— ç”¨ä»£ç çš„åˆ é™¤ã€‚</p>
<p>å°±ç®—ç¬¬ä¸‰æ–¹æ¨¡å—æä¾›äº† ES6 æ¨¡å—çš„æ”¯æŒï¼Œå› ä¸ºä¸Šé¢è¯´åˆ°çš„åŸå› ï¼ŒTree Shaking ä¹Ÿä¸ä¸€å®šèƒ½å‘æŒ¥ä½œç”¨ï¼Œæ‹¿ Ant Design ä¸¾ä¾‹ï¼Œå…¶åŒ…ä¸‹é¢æœ‰ä¸€ä¸ª es æ–‡ä»¶å¤¹ï¼Œè¿™å°±æ˜¯ ES6 æ¨¡å—ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>antd</code> åŒ…çš„ <code>package.json</code> æ–‡ä»¶å·²ç»é…ç½®äº† <code>module</code> å­—æ®µï¼Œå› æ­¤ï¼Œ<code>wepack 2</code> åŠä»¥ä¸Šå¯ä»¥æ„ŸçŸ¥å…¶æ‹¥æœ‰ ES6 æ¨¡å—ï¼Œä»è€Œåœ¨å¼•å…¥çš„æ—¶å€™ä¼šä» es æ–‡ä»¶å¤¹ä¸­å¼•å…¥ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬å†™ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Button &#125; <span class="keyword">from</span> <span class="string">'antd'</span></div></pre></td></tr></table></figure>
<p>å¹¶è¿›è¡Œæ‰“åŒ…åï¼Œæˆ‘ä»¬ä¼šå‘ç°æ•´ä¸ª <code>antd</code> å·²ç»è¢«æ‰“åŒ…è¿›å»äº†ï¼Œéšä¾¿çœ‹ä¸€ä¸ªæ¨¡å—ï¼Œä¼šå‘ç° <code>antd</code> çš„å„ä¸ªç»„ä»¶æ¨¡å—ä¹Ÿæ˜¯æœ‰å‰¯ä½œç”¨çš„ï¼Œå°±æ¯”å¦‚ä¸€äº›ç»„ä»¶ä½¿ç”¨äº†ç±»ä¼¼ä¸‹é¢çš„ä»£ç å¯¹ç»„ä»¶è¿›è¡ŒåŠŸèƒ½ä¸Šçš„å¢å¼ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">decorate(Component)</div></pre></td></tr></table></figure>
<p>æœ€ç»ˆæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä½¿ç”¨ Babel Plugin çš„æ–¹å¼å¯¹å…¶è¿›è¡ŒæŒ‰éœ€åŠ è½½ã€‚</p>
<p>æœ€åçš„æ€»ç»“å°±æ˜¯ï¼ŒTree Shaking å¯¹ä¸€äº›çº¯å‡½æ•°çš„åº“åº”è¯¥ä¼šæœ‰ä¸é”™çš„ä»·å€¼ï¼Œä½†æ˜¯ Tree Shaking å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„æœ‰æ•ˆï¼Œå¯¹äºå¾ˆå¤šé¡¹ç›®ï¼Œå…¶å¹¶ä¸èƒ½å‘æŒ¥å‡ºå…¶æ•ˆæœï¼Œä¸è¿‡ï¼Œæœ‰æ€»æ¯”æ²¡æœ‰å¥½å§ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol>
<li><a href="http://imweb.io/topic/58666d57b3ce6d8e3f9f99b0" target="_blank" rel="external">webpack2 çš„ tree-shaking å¥½ç”¨å—ï¼Ÿ - è…¾è®¯Webå‰ç«¯ IMWeb å›¢é˜Ÿç¤¾åŒº | blog | å›¢é˜Ÿåšå®¢</a></li>
<li><a href="https://toutiao.io/posts/cu9vfs/preview" target="_blank" rel="external">è¯‘ ä¸ºä»€ä¹ˆ Webpack 2 çš„ Tree Shaking å¹¶éåƒä½ æƒ³çš„é‚£ä¹ˆé«˜æ•ˆï¼Ÿ - å¼€å‘è€…å¤´æ¡</a></li>
<li><a href="https://github.com/webpack/webpack/issues/2867" target="_blank" rel="external">Tree shaking completely broken? Â· Issue #2867 Â· webpack/webpack Â· GitHub</a></li>
<li><a href="http://www.aliued.com/?p=4060" target="_blank" rel="external">é˜¿é‡Œå·´å·´å›½é™…UEDå›¢é˜Ÿ Â» ä»Šå¤©ï¼Œä½ å‡çº§Webpack2äº†å—ï¼Ÿ</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/07/09/note-of-rollup/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/09/note-of-rollup/" itemprop="url">
                  Rollup å°è®°
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-09T09:47:14+08:00">
                2017-07-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å­¦ä¹ ç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä¹ ç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/07/09/note-of-rollup/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/07/09/note-of-rollup/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Rollup æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå…¶åˆ©ç”¨äº† ES6 æ¨¡å—çš„ç‰¹æ€§ï¼Œåªå°†éœ€è¦çš„ä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å¤§å¤§å‡å°æ‰“åŒ…çš„ä½“ç§¯ï¼ˆä¸ç”¨æ‰“åŒ…æ•´ä¸ªï¼‰ï¼Œå®˜æ–¹ç§°è¿™ä¸ªç‰¹æ€§ä¸º Tree Shakingã€‚å¦å¤–ï¼ŒWebpack 2 ä¹Ÿæ”¯æŒäº† Tree Shakingï¼Œå› æ­¤ Tree Shaking å·²ç»ä¸èƒ½ä½œä¸º Rollup çš„ä¸€ä¸ªä¼˜åŠ¿äº†ï¼Œä¸è¿‡ï¼ŒRollup çš„é…ç½®ç›¸è¾ƒäº Webpack æ›´åŠ ç®€å•æ˜äº†ï¼Œè¿™ç®—æ˜¯ Rollup çš„ä¸€ä¸ªä¼˜åŠ¿ã€‚ä¸è¿‡ï¼ŒRollup çš„åŠŸèƒ½ä¹Ÿæ²¡æœ‰ Webpack å¤šï¼Œæ¯”å¦‚è¯´ Rollup ä¸æ”¯æŒ Code Splittingï¼Œå„ç§é™æ€èµ„æºçš„å¤„ç†ã€‚æ€»çš„æ¥è¯´ï¼ŒRollup æ›´é€‚åˆåº“çš„æ‰“åŒ…ï¼Œæ¯”å¦‚è¯´ Reactï¼ŒVue è¿™ç±»åº“ã€‚è€Œ Webpack åˆ™æ›´é€‚åˆç”¨äº Web Appã€‚</p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>å¯ä»¥åœ¨ CLI ä¸­ç»™ Rollup ä¼ å‚æ•°ï¼Œä¹Ÿå¯ä»¥å†™åˆ°é…ç½®æ–‡ä»¶é‡Œé¢ï¼Œå¦‚æœé…ç½®æ–‡ä»¶é‡Œå†™äº†ï¼ŒCLI åˆä¼ äº†ç›¸å…³çš„å‚æ•°ï¼Œåˆ™ CLI çš„å‚æ•°ä¼šè¦†ç›–æ‰é…ç½®æ–‡ä»¶é‡Œçš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> resolve <span class="keyword">from</span> <span class="string">'rollup-plugin-node-resolve'</span>;</div><div class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">'rollup-plugin-babel'</span>;</div><div class="line"><span class="keyword">import</span> commonjs <span class="keyword">from</span> <span class="string">'rollup-plugin-commonjs'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'src/main.js'</span>,</div><div class="line">  <span class="attr">format</span>: <span class="string">'cjs'</span>,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">    resolve(),</div><div class="line">    commonjs(),</div><div class="line">    babel(&#123;</div><div class="line">      <span class="attr">exclude</span>: <span class="string">'node_modules/**'</span></div><div class="line">    &#125;)</div><div class="line">  ],</div><div class="line">  <span class="attr">dest</span>: <span class="string">'dist/bundle.js'</span>,</div><div class="line">  <span class="attr">sourceMap</span>: <span class="literal">true</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„é…ç½®æ–‡ä»¶ï¼Œå…¶æŒ‡å®šäº†å…¥å£æ–‡ä»¶(entry)ï¼Œæ‰“åŒ…æˆ <code>commonjs</code> å½¢å¼çš„æ¨¡å—ï¼Œä½¿ç”¨åˆ°äº†å‡ ä¸ªæ’ä»¶ï¼ŒæŒ‡å®šäº†æ‰“åŒ…åœ°å€ä¸º(dest)ï¼Œå¼€å¯äº† sourceMap åŠŸèƒ½ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRollup çš„é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ª JS æ–‡ä»¶ï¼Œè™½ç„¶å…¶ç”¨åˆ°äº† ES6 çš„æ¨¡å—åŠŸèƒ½ï¼Œä½†æ˜¯é™¤æ­¤ä¹‹å¤–ï¼Œå…¶å¹¶ä¸ä¼šå¯¹ä»£ç è¿›è¡Œè½¬æ¢ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä½ åœ¨é‡Œé¢å†™äº†ä½  Node ç‰ˆæœ¬ä¸æ”¯æŒçš„ç‰¹æ€§ä»£ç çš„è¯æ˜¯ä¼šå‡ºé”™çš„ã€‚å¦å¤–ï¼ŒRollup é»˜è®¤æ˜¯åªè®¤ ES6 æ¨¡å—çš„ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©æ’ä»¶æ¥å¸®åŠ©ä½ å¼•å…¥å…¶ä»–å½¢å¼çš„æ¨¡å—ã€‚</p>
<h2 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// maths.js</span></div><div class="line"><span class="comment">// This function isn't used anywhere, so</span></div><div class="line"><span class="comment">// Rollup excludes it from the bundle...</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">square</span> (<span class="params"> x </span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> x * x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// This function gets included</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">cube</span> (<span class="params"> x </span>) </span>&#123;</div><div class="line">	<span class="comment">// rewrite this as `square( x ) * x`</span></div><div class="line">	<span class="comment">// and see what happens!</span></div><div class="line">	<span class="keyword">return</span> x * x * x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// main.js</span></div><div class="line"><span class="keyword">import</span> &#123; cube &#125; <span class="keyword">from</span> <span class="string">'./maths.js'</span>;</div><div class="line"><span class="built_in">console</span>.log( cube( <span class="number">5</span> ) ); <span class="comment">// 125</span></div></pre></td></tr></table></figure>
<p>å‡è®¾ <code>main.js</code> ä¸ºå…¥å£æ–‡ä»¶ï¼Œæ‰“åŒ…æˆ es6 æ¨¡å—ï¼Œæœ€ç»ˆç»“æœæ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// This function isn't used anywhere, so</span></div><div class="line"><span class="comment">// Rollup excludes it from the bundle...</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// This function gets included</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cube</span> (<span class="params"> x </span>) </span>&#123;</div><div class="line">	<span class="comment">// rewrite this as `square( x ) * x`</span></div><div class="line">	<span class="comment">// and see what happens!</span></div><div class="line">	<span class="keyword">return</span> x * x * x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( cube( <span class="number">5</span> ) ); <span class="comment">// 125</span></div></pre></td></tr></table></figure>
<p>çœ‹ï¼Œ<code>square</code> å‡½æ•°æ²¡æœ‰è¢«æ‰“åŒ…è¿›æ¥ï¼Œè¿™å°±æ˜¯ Tree Shaking çš„èƒ½åŠ›ã€‚</p>
<p>Tree Shaking ä¸ Dead Code Elimination çš„åŒºåˆ«æ˜¯ï¼ŒDead Code Elimination æ˜¯å…ˆæ‰“åŒ…å‡ºäº†ä¸€ä¸ªå…·æœ‰å†—ä½™ä»£ç çš„æ¨¡å—ï¼Œç„¶åæ£€æµ‹ Dead Codeï¼Œå†åˆ é™¤ç›¸å…³ä»£ç ã€‚è€Œ Tree Shaking ä»ä¸€å¼€å§‹å°±æ²¡æœ‰å°†è¿™äº›ä»£ç æ‰“åŒ…è¿›æ¥ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://rollupjs.org/" target="_blank" rel="external">rollup.js</a><br><a href="https://webpack.js.org/guides/tree-shaking/" target="_blank" rel="external">Tree Shaking</a><br><a href="https://medium.com/modus-create-front-end-development/webpack-2-tree-shaking-configuration-9f1de90f3233" target="_blank" rel="external">Webpack 2 Tree Shaking Configuration â€“ Modus Create: Front End Development â€“ Medium</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/05/01/xss-protection/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/01/xss-protection/" itemprop="url">
                  XSS Protection Summary
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-01T13:06:37+08:00">
                2017-05-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å‰ç«¯å®‰å…¨/" itemprop="url" rel="index">
                    <span itemprop="name">å‰ç«¯å®‰å…¨</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/05/01/xss-protection/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/01/xss-protection/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>XSS æ”»å‡»åˆ†ä¸º <strong>åå°„å‹</strong> ã€<strong>å­˜å‚¨å‹</strong> å’Œ <strong>DOM Based XSS</strong></p>
<h3 id="åå°„å‹-XSS"><a href="#åå°„å‹-XSS" class="headerlink" title="åå°„å‹ XSS"></a>åå°„å‹ XSS</h3><p>åå°„å‹ XSS æ˜¯æŠŠç”¨æˆ·çš„è¾“å…¥åå°„å›æµè§ˆå™¨æ‰€é€ æˆçš„ XSS æ”»å‡»ï¼Œæ¯”å¦‚è¯´æœ¬æ¥ç½‘é¡µä¸Šæœ‰ä¸€ä¸ªè¡¨å•è®©ç”¨æˆ·å¡«ç”¨æˆ·åï¼Œç”¨æˆ·æäº¤è¡¨å•ä¹‹åè¿”å›çš„å“åº”å°†ç”¨æˆ·å¡«å†™çš„ç”¨æˆ·åæ˜¾ç¤ºå‡ºæ¥ã€‚è¿™ç§ç±»å‹çš„æ”»å‡»ï¼Œä¸€èˆ¬æ”»å‡»è€…çš„æ”»å‡»æ‰‹æ®µä¸ºæ„é€ ä¸€ä¸ª URL è®©ç”¨æˆ·å»ç‚¹å‡»ï¼Œå½“ç”¨æˆ·ç‚¹å‡»äº†è¿™ä¸ª URL ä¹‹åï¼Œæ”»å‡»æ‰èƒ½æˆåŠŸã€‚</p>
<p>æˆ‘ä»¬è¯•ç€å»æ„é€ è¿™æ ·ä¸€ä¸ªæ”»å‡»çš„ä¾‹å­ï¼Œä½¿ç”¨ node.js æ­å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</div><div class="line"></div><div class="line"><span class="keyword">const</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">request, response</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> parsedURL = url.parse(request.url, <span class="literal">true</span>);</div><div class="line">  response.setHeader(<span class="string">'X-XSS-Protection'</span>, <span class="number">0</span>);</div><div class="line">  <span class="keyword">if</span> (parsedURL.query.a) &#123;</div><div class="line">    response.end(<span class="string">`&lt;html&gt;&lt;head&gt;&lt;title&gt;XSS&lt;/title&gt;&lt;/head&gt;&lt;body&gt;<span class="subst">$&#123;parsedURL.query.a&#125;</span>&lt;/body&gt;&lt;/html&gt;`</span>);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    response.end(<span class="string">'No Param a'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">server.listen(<span class="number">3002</span>);</div></pre></td></tr></table></figure>
<p>å½“è¾“å…¥çš„ URL ä¸­æœ‰å‚æ•° <code>a</code> çš„æ—¶å€™ï¼Œä¼šå°†è¿™ä¸ªå‚æ•°çš„å€¼åµŒå…¥åˆ° body ä½œä¸ºå“åº”è¿”å›åˆ°å®¢æˆ·ç«¯ã€‚</p>
<p>æ³¨æ„åˆ°ï¼Œæˆ‘åœ¨è¿”å›çš„å¤´éƒ¨è®¾ç½®äº† <code>X-XSS-Protection: 0</code>ï¼Œä¸ç„¶ Chrome ä¼šé»˜è®¤æ‹¦æˆªå¯èƒ½çš„ XSS æ”»å‡»ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬æ„é€ è¿™æ ·ä¸€ä¸ªURLï¼š<code>http://localhost:3002/xss?a=&lt;script&gt;alert(/xss/)&lt;script&gt;</code></p>
<p><img src="http://7xpc78.com1.z0.glb.clouddn.com/xss-protection/reflect.png" alt="åå°„å‹XSS"></p>
<h3 id="å­˜å‚¨å‹-XSS"><a href="#å­˜å‚¨å‹-XSS" class="headerlink" title="å­˜å‚¨å‹ XSS"></a>å­˜å‚¨å‹ XSS</h3><p>å­˜å‚¨å‹ XSSï¼Œä¸åŒäºåå°„å‹çš„ XSS æ”»å‡»ï¼Œä¼šå°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ä¾‹å­æ˜¯æ”»å‡»è€…å‘å¸ƒäº†ä¸€ç¯‡åŒ…å«æ¶æ„ JavaScript ä»£ç çš„æ–‡ç« ï¼Œæ‰€æœ‰è®¿é—®è¯¥æ–‡ç« çš„ç”¨æˆ·éƒ½ä¼šå—åˆ°æ”»å‡»ã€‚</p>
<h3 id="DOM-Based-XSS"><a href="#DOM-Based-XSS" class="headerlink" title="DOM Based XSS"></a>DOM Based XSS</h3><p>DOM Based é€šè¿‡ JS æ“ä½œ DOM å…ƒç´ é€ æˆ XSSï¼ˆå¦‚å¾€äº‹ä»¶å±æ€§é‡Œé¢å†™ä¿¡æ¯ï¼‰ï¼Œä¸¥æ ¼æ¥è¯´ï¼ŒDOM Based XSS ä¹Ÿæ˜¯åå°„å‹ XSS çš„ä¸€ç§ï¼Œä¸è¿‡è¿™ç§æ”»å‡»ä¸æ˜¯æœåŠ¡å™¨è¿”å›çš„æ•°æ®åŒ…å«äº†æ¶æ„è„šæœ¬ï¼Œè€Œæ˜¯ç›´æ¥åœ¨å®¢æˆ·ç«¯å°±ç”Ÿæˆäº†æ¶æ„è„šæœ¬ã€‚è¿˜æ˜¯çœ‹ä¸€ä¸ªä¾‹å­ï¼ˆ <a href="https://www.owasp.org/index.php/DOM_Based_XSS" target="_blank" rel="external">DOM Based XSS - OWASP</a> ï¼‰ï¼š</p>
<p>å‡è®¾æœåŠ¡å™¨è¿”å›å¦‚ä¸‹æ‰€ç¤ºçš„ HTML é¡µé¢ï¼Œæ³¨æ„åˆ°ï¼ŒOPTION é€‰é¡¹æ˜¯ä»ç”¨æˆ·çš„é“¾æ¥ä¸­æå–çš„</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Select your language:</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line"><span class="built_in">document</span>.write(<span class="string">"&lt;OPTION value=1&gt;"</span>+<span class="built_in">document</span>.location.href.substring(<span class="built_in">document</span>.location.href.indexOf(<span class="string">"default="</span>)+<span class="number">8</span>)+<span class="string">"&lt;/OPTION&gt;"</span>);</div><div class="line"></div><div class="line"><span class="built_in">document</span>.write(<span class="string">"&lt;OPTION value=2&gt;English&lt;/OPTION&gt;"</span>);</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æ­£å¸¸çš„é“¾æ¥åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://www.some.site/page.html?default=French</div></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ ä¸€ä¸ªè¿™æ ·çš„ URL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://www.some.site/page.html?default=&lt;script&gt;alert(document.cookie)&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>å½“ç”¨æˆ·ç‚¹å‡»äº†è¿™æ ·ä¸€ä¸ª URL ä¹‹åï¼Œæ”»å‡»å°±æˆåŠŸäº†ï¼Œæµè§ˆå™¨ä¼šæ‰§è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alert(<span class="built_in">document</span>.cookie)</div></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•é˜²èŒƒ"><a href="#å¦‚ä½•é˜²èŒƒ" class="headerlink" title="å¦‚ä½•é˜²èŒƒ"></a>å¦‚ä½•é˜²èŒƒ</h2><h3 id="ç»™-Cookie-è®¾ç½®-HttpOnly"><a href="#ç»™-Cookie-è®¾ç½®-HttpOnly" class="headerlink" title="ç»™ Cookie è®¾ç½® HttpOnly"></a>ç»™ Cookie è®¾ç½® HttpOnly</h3><p>å¾ˆå¤š XSS æ”»å‡»æƒ³è¦è·å–ç”¨æˆ·çš„ cookieï¼Œä¸€èˆ¬ä¼šè·å– cookie ç„¶åä¼ é€åˆ°æ”»å‡»è€…çš„æœåŠ¡å™¨ä¸Šï¼Œç„¶åå¯ä»¥ä»¥è¯¥ç”¨æˆ·çš„èº«ä»½åšä¸€äº›æ“ä½œï¼ˆå½“ç„¶å¹¶ä¸æ˜¯æ‰€æœ‰éƒ½éœ€è¦ï¼‰ï¼Œç»™ Cookie è®¾ç½® HttpOnly ä¹‹åï¼ŒJavaScript å°±ä¸èƒ½è¯»å– Cookie äº†ã€‚</p>
<h3 id="è¾“å…¥æ£€æŸ¥"><a href="#è¾“å…¥æ£€æŸ¥" class="headerlink" title="è¾“å…¥æ£€æŸ¥"></a>è¾“å…¥æ£€æŸ¥</h3><p>è¾“å…¥æ£€æŸ¥åšçš„æ˜¯è¿‡æ»¤ç”¨æˆ·å¯èƒ½ä¼šé€ æˆ XSS æ”»å‡»çš„è¾“å…¥ï¼Œæ¯”å¦‚è¯´ç”¨æˆ·çš„ç”¨æˆ·åå¡«å†™åªèƒ½æ˜¯æ•°å­—åŠ å­—æ¯ï¼Œå¦‚æœè¦åšè¾“å…¥æ£€æŸ¥ï¼ŒæœåŠ¡å™¨ç«¯å¿…é¡»è¦æœ‰è¾“å…¥æ£€æŸ¥çš„é€»è¾‘ï¼Œå¦å¤–ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥åšè¾“å…¥æ£€æŸ¥çš„é€»è¾‘ï¼Œå¯ä»¥å°†æ­£å¸¸ç”¨æˆ·çš„ä¸å°å¿ƒçš„è¾“å…¥ç›´æ¥æ’é™¤ï¼Œä¸ä»…å¢å¼ºäº†ç”¨æˆ·ä½“éªŒï¼Œè¿˜å‡è½»äº†æœåŠ¡å™¨çš„å‹åŠ›ã€‚<br>ä½†æ˜¯ï¼Œè¾“å…¥æ£€æŸ¥ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªå¯ä»¥è®©ç”¨æˆ·è‡ªå®šä¹‰ script æ ‡ç­¾çš„ URL çš„åœ°æ–¹ï¼Œæ­¤æ—¶ï¼Œæ”»å‡»è€…å¤§å¯ä»¥è¾“å…¥ä¸€ä¸ªæŒ‡å‘æ¶æ„è„šæœ¬çš„åœ°å€ï¼ŒæœåŠ¡å™¨å¾ˆéš¾åˆ¤åˆ«è¿™æ˜¯å¦æ˜¯æ¶æ„çš„è„šæœ¬ã€‚</p>
<h3 id="è¾“å‡ºæ£€æŸ¥"><a href="#è¾“å‡ºæ£€æŸ¥" class="headerlink" title="è¾“å‡ºæ£€æŸ¥"></a>è¾“å‡ºæ£€æŸ¥</h3><p>è¾“å‡ºæ£€æŸ¥æ˜¯åœ¨è¾“å‡ºçš„æ—¶å€™è¿›è¡Œè¿‡æ»¤æˆ–è€…è½¬ä¹‰ã€‚<br>æ ¹æ®è¾“å‡ºä½ç½®çš„ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸åŒçš„ç­–ç•¥æ¥è¿›è¡Œæ–‡æœ¬çš„è½¬ä¹‰ï¼Œåˆ‡ä¸å¯åªä½¿ç”¨ä¸€ç§è½¬ä¹‰çš„æ–¹æ³•å°±è§‰å¾—ä¸‡äº‹å¤§å‰äº†ã€‚<br>å¾ˆå¤šåç«¯æ¡†æ¶æ”¯æŒé»˜è®¤çš„è½¬ä¹‰ï¼Œä¸€èˆ¬ä¼šå¯¹å˜é‡è¿›è¡Œ HTML è½¬ä¹‰ï¼Œä¸è¿‡ï¼Œå³ä½¿æ˜¯è¿™æ ·ï¼Œä»ç„¶æœ‰å¯èƒ½å­˜åœ¨ç€ XSS æ¼æ´ã€‚<br>æ¯”å¦‚è¯´ç”¨æˆ·å¯ä»¥åœ¨å¦‚ä¸‹ HTML ä¸­è¾“å…¥å˜é‡ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"alert('$var');"</span>&gt;</span>CLICK ME<span class="tag">&lt;<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å¦‚æœæ”»å‡»è€…è¾“å…¥å¦‚ä¸‹å­—ç¬¦ä¸²</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1&apos;);alert(&apos;2</div></pre></td></tr></table></figure>
<p>ç»è¿‡è½¬ä¹‰ä¹‹åå˜ä¸ºå¦‚ä¸‹çš„å­—ç¬¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1&amp;#x27;&amp;#x29;;&amp;#x3B;alert&amp;#x28;&amp;#x27;2</div></pre></td></tr></table></figure>
<p><img src="http://7xpc78.com1.z0.glb.clouddn.com/xss-protection/xss-in-event-handler.png" alt="æ’å…¥äº‹ä»¶å±æ€§çš„å˜é‡"></p>
<p>å³ä½¿è¿™æ ·ï¼Œä»ç„¶ä¼šå‘ç°æµè§ˆå™¨çš„è¡Œä¸ºä¸º <code>alert(1)</code> å’Œ <code>alert(2)</code>ï¼Œç©¶å…¶åŸå› ï¼Œonclick ä¸­çš„æ•°æ®ä¼šå…ˆç»è¿‡æµè§ˆå™¨çš„è§£æï¼Œæ­¤æ—¶åˆæˆä¸ºäº†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alert(<span class="string">'1'</span>);alert(<span class="string">'2'</span>);</div></pre></td></tr></table></figure>
<p>è‡ªç„¶æ”»å‡»èƒ½å¤ŸæˆåŠŸã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¯¹åœ¨ä¸åŒæƒ…å†µä¸‹çš„è¾“å‡ºåšä¸åŒçš„è½¬ç§»ï¼š</p>
<p>1.åœ¨ HTML æ ‡ç­¾ä¹‹é—´è¾“å‡ºï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡Œ HTML Entity ç¼–ç </p>
<p><strong>ç¼–ç è§„åˆ™</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&amp; -&gt; &amp;amp;</div><div class="line">&lt; -&gt; &amp;lt;</div><div class="line">&gt; -&gt; &amp;gt;</div><div class="line">&quot; -&gt; &amp;quot;</div><div class="line">&apos; -&gt; &amp;#x27;</div><div class="line">/ -&gt; &amp;#x2f;</div></pre></td></tr></table></figure>
<p>2.è¦å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTMLå±æ€§ç¼–ç </p>
<p><strong>ç¼–ç è§„åˆ™</strong></p>
<p>é™¤äº†é˜¿æ‹‰ä¼¯æ•°å­—å’Œå­—æ¯ï¼Œå¯¹å…¶ä»–æ‰€æœ‰å­—ç¬¦è¿›è¡Œç¼–ç ã€‚ç¼–ç åè¾“å‡ºä¸º <code>&amp;#xHH;</code> HH ä¸ºå¯¹åº”çš„åå…­è¿›åˆ¶æ•°å­—ï¼Œåˆ†å·ä½œä¸ºç»“æŸç¬¦ã€‚<br>é˜²æ­¢åœ¨å±æ€§å€¼è¿›è¡Œæ„é€ å…³é—­å½“å‰æ ‡ç­¾ã€‚ç„¶åè‡ªå·±çš„æ ‡ç­¾å°±å¯ä»¥ä½œä¸º HTML å®ä½“æ’å…¥äº†ã€‚</p>
<p>3.åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ° script é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡Œ script ç¼–ç </p>
<p><strong>ç¼–ç è§„åˆ™</strong></p>
<p>é™¤äº†é˜¿æ‹‰ä¼¯æ•°å­—å’Œå­—æ¯ï¼Œå¯¹å…¶ä»–æ‰€æœ‰å­—ç¬¦è¿›è¡Œç¼–ç ã€‚ç¼–ç åè¾“å‡ºçš„æ ¼å¼ä¸º <code>\xHH</code>ã€‚</p>
<p>ä¸è¦ç”¨åæ–œæ å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">var</span> message = <span class="string">"&#123;&#123;data&#125;&#125;"</span>;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æ”»å‡»è€…è¾“å…¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\&quot;; alert(&apos;xss&apos;);//</div></pre></td></tr></table></figure></p>
<p>ç»“æœæ¸²æŸ“ä¸Šå»ä¹‹åæ˜¯<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">var</span> message = <span class="string">"\\"</span>; alert(<span class="string">'xss'</span>);<span class="comment">//</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>4.åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ° style å±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡Œ CSS ç¼–ç </p>
<p>é™¤äº†é˜¿æ‹‰ä¼¯æ•°å­—å’Œå­—æ¯ï¼Œå¯¹å…¶ä»–æ‰€æœ‰å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œè½¬ç§»ä¹‹åå˜ä¸ºå½¢å¦‚ <code>\HH</code> çš„å­—ç¬¦ã€‚</p>
<p>5.åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ° HTML URL é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡Œ URL ç¼–ç <br>é™¤äº†é˜¿æ‹‰ä¼¯æ•°å­—å’Œå­—æ¯ï¼Œå¯¹å…¶ä»–æ‰€æœ‰å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œè½¬ä¹‰ä¹‹åå˜ä¸ºå½¢å¦‚  <code>%HH</code>  çš„å­—ç¬¦ã€‚</p>
<p>å¯¹URLè¿›è¡Œç¼–ç çš„æ—¶å€™çš„æ³¨æ„ç‚¹ï¼š</p>
<ol>
<li>URLå±æ€§ç”¨å¼•å·åŒ…å«èµ·æ¥</li>
<li>ä¸è¦å¯¹æ•´ä¸ªURLè¿›è¡Œç¼–ç ï¼Œå› ä¸ºä¸å¯ä¿¡æ•°æ®ä¼šæ’å…¥åˆ° href src æˆ–å…¶ä»–ä»¥URLä¸ºåŸºç¡€çš„å±æ€§é‡Œé¢ï¼Œå¹¶ä¸”è¦å¯¹åè®®å­—æ®µè¿›è¡Œè®¤è¯ï¼Œå¦åˆ™æ”»å‡»è€…å¯ä»¥æ”¹å˜åè®®ï¼Œå¦‚  <code>data</code>  åè®®æˆ–è€…  <code>javascript</code>  ä¼ªåè®®</li>
</ol>
<p>6.ä½¿ç”¨å¯Œæ–‡æœ¬æ—¶ï¼Œä½¿ç”¨ XSS è§„åˆ™å¼•æ“è¿›è¡Œç¼–ç è¿‡æ»¤ï¼Œä½¿ç”¨ç™½åå•ç­–ç•¥</p>
<p>é’ˆå¯¹å¯Œæ–‡æœ¬çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨XSSè§„åˆ™å¼•æ“å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œç¼–ç è¿‡æ»¤ï¼Œåªå…è®¸ç”¨æˆ·è¾“å…¥å®‰å…¨çš„HTMLæ ‡ç­¾ï¼Œå¦‚ <code>&lt;b&gt;</code>ï¼Œ<code>&lt;i&gt;</code>ï¼Œ <code>&lt;p&gt;</code>ç­‰ï¼Œå¯¹å…¶ä»–æ•°æ®è¿›è¡Œ HTML ç¼–ç ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç»è¿‡è§„åˆ™å¼•æ“ç¼–ç è¿‡æ»¤åçš„å†…å®¹åªèƒ½æ”¾åœ¨ <code>&lt;div&gt;</code>ï¼Œ <code>&lt;p&gt;</code>  ç­‰å®‰å…¨çš„HTMLæ ‡ç­¾é‡Œï¼Œä¸è¦æ”¾åˆ° HTML æ ‡ç­¾çš„å±æ€§å€¼é‡Œï¼Œæ›´ä¸è¦æ”¾åˆ°HTML äº‹ä»¶å¤„ç†å±æ€§é‡Œï¼Œæˆ–è€…æ”¾åˆ°  <code>&lt;script&gt;</code> æ ‡ç­¾é‡Œã€‚</p>
<p>å¦‚ä¸‹å°±æ˜¯æ˜¯ä¸€ä¸ª XSS è¿‡æ»¤å·¥å…·<br> <a href="https://github.com/leizongmin/js-xss" target="_blank" rel="external">GitHub - leizongmin/js-xss: Sanitize untrusted HTML (to prevent XSS) with a configuration specified by a Whitelist</a></p>
<h4 id="DOM-Based-XSS-1"><a href="#DOM-Based-XSS-1" class="headerlink" title="DOM Based XSS"></a>DOM Based XSS</h4><p>DOM Based XSS çš„æ”»å‡»æ–¹æ³•æ˜¯åœ¨ JavaScript å°†å†…å®¹å†™åˆ° HTML é¡µé¢ä¸­ï¼Œä¸€èˆ¬åœ¨è¿”å›çš„é¡µé¢ä¸­å¯èƒ½å·²ç»å¯¹ JavaScript ä¸­çš„å˜é‡è¿›è¡Œè½¬ä¹‰äº†ï¼Œä½†åœ¨ script æ ‡ç­¾æ‰§è¡Œçš„æ—¶å€™ï¼Œå†…å®¹åˆä¼šè¢«è§£ç ï¼Œç„¶åè¾“å‡ºåˆ° HTML ä¸­ã€‚å› æ­¤é˜²å¾¡ DOM Based XSS çš„æ—¶å€™ï¼Œä¸€ä¸ªé‡è¦çš„å…³æ³¨ç‚¹æ˜¯åœ¨ JavaScript è¾“å‡ºçš„æ—¶å€™å¯¹å…¶è¿›è¡Œå†æ¬¡çš„è½¬ä¹‰ï¼Œè½¬ä¹‰çš„æ–¹æ¡ˆä¸ä¸Šé¢æ‰€è¿°ç›¸åŒã€‚</p>
<h4 id="ä½¿ç”¨-XSS-å®‰å…¨ç›¸å…³çš„å¤´éƒ¨"><a href="#ä½¿ç”¨-XSS-å®‰å…¨ç›¸å…³çš„å¤´éƒ¨" class="headerlink" title="ä½¿ç”¨ XSS å®‰å…¨ç›¸å…³çš„å¤´éƒ¨"></a>ä½¿ç”¨ XSS å®‰å…¨ç›¸å…³çš„å¤´éƒ¨</h4><p>1.X-XSS-Protection</p>
<p>æµè§ˆå™¨é»˜è®¤å¼€å¯äº† XSS ä¿æŠ¤ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå¤´éƒ¨å…³é—­è¿™ç§ç‰¹æ€§ï¼Œä¸€èˆ¬ä¸éœ€è¦å…³é—­ï¼š</p>
<ul>
<li>0ï¼šç¦ç”¨XSSä¿æŠ¤</li>
<li>1ï¼šå¯ç”¨XSSä¿æŠ¤</li>
<li>1ï¼šmode=blockï¼šå¯ç”¨XSSä¿æŠ¤ï¼Œå¹¶åœ¨æ£€æŸ¥åˆ°XSSæ”»å‡»æ—¶ï¼Œåœæ­¢æ¸²æŸ“é¡µé¢</li>
</ul>
<p>2.Content-Security-Policy</p>
<p>ä½¿ç”¨ Content-Security-Policy å¯ä»¥é™åˆ¶é¡µé¢å¯ä»¥åŠ è½½å“ªäº›å†…å®¹</p>
<p>æ¬¢è¿å¤§å®¶æ¢è®¨äº¤æµï¼Œæœ‰é”™è¯¯è¯·æŒ‡æ­£ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol>
<li>ã€Šç™½å¸½å­å°† Web å®‰å…¨ã€‹</li>
<li><a href="https://imququ.com/post/web-security-and-response-header.html" target="_blank" rel="external">ä¸€äº›å®‰å…¨ç›¸å…³çš„HTTPå“åº”å¤´ | JerryQu çš„å°ç«™</a></li>
<li><a href="https://imququ.com/post/content-security-policy-reference.html" target="_blank" rel="external">Content Security Policy ä»‹ç» | JerryQu çš„å°ç«™</a></li>
<li><a href="https://github.com/leizongmin/js-xss" target="_blank" rel="external">GitHub - leizongmin/js-xss: Sanitize untrusted HTML (to prevent XSS) with a configuration specified by a Whitelist</a></li>
<li><a href="https://www.owasp.org/index.php/DOM_Based_XSS" target="_blank" rel="external">DOM Based XSS</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/03/12/async-file-upload/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/12/async-file-upload/" itemprop="url">
                  å¼‚æ­¥æ–‡ä»¶ä¸Šä¼ 
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-12T23:53:06+08:00">
                2017-03-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å­¦ä»¥è‡´ç”¨/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä»¥è‡´ç”¨</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/03/12/async-file-upload/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/12/async-file-upload/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä½¿ç”¨-iframe-è¿›è¡Œæ–‡ä»¶çš„å¼‚æ­¥ä¸Šä¼ "><a href="#ä½¿ç”¨-iframe-è¿›è¡Œæ–‡ä»¶çš„å¼‚æ­¥ä¸Šä¼ " class="headerlink" title="ä½¿ç”¨ iframe è¿›è¡Œæ–‡ä»¶çš„å¼‚æ­¥ä¸Šä¼ "></a>ä½¿ç”¨ iframe è¿›è¡Œæ–‡ä»¶çš„å¼‚æ­¥ä¸Šä¼ </h2><p>ä½¿ç”¨ <code>iframe</code> è¿›è¡Œæ–‡ä»¶çš„å¼‚æ­¥ä¸Šä¼ çš„åŸºæœ¬æ€æƒ³æ˜¯åœ¨è¡¨å•ä¸Šä¼ çš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ª <code>iframe</code> å…ƒç´ ï¼Œå¹¶å°†è¡¨å•çš„ <code>target</code> å±æ€§è®¾ç½®ä¸ºåˆ›å»ºçš„ <code>iframe</code> çª—å£ï¼Œè¿™æ ·ï¼Œä¸Šä¼ ç»“æŸè¿”å›çš„æ•°æ®ä¼šåˆ° <code>iframe</code> çª—å£é‡Œé¢ï¼Œé¡µé¢ä¹Ÿä¸ä¼šå‘ç”Ÿè½¬è·³ã€‚</p>
<p>åºŸè¯ä¸å¤šè¯´ï¼Œæ¥çœ‹çœ‹ä»£ç ï¼š</p>
<p>é¦–å…ˆæ˜¯åŸºæœ¬çš„è¡¨å•</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"myform"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">action</span>=<span class="string">"/someurl"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"myfile"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æ¥ç€å†çœ‹çœ‹ <code>JavaScript</code> ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç”¨äºç”Ÿæˆ iframe çª—å£ name å±æ€§</span></div><div class="line"><span class="keyword">var</span> seed = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> myform = <span class="built_in">document</span>.getElementById(<span class="string">'myform'</span>);</div><div class="line">myform.onsubmit = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</div><div class="line">  <span class="keyword">var</span> id = <span class="string">'uploader-frame-'</span> + seed;</div><div class="line">  seed++;</div><div class="line">  iframe.setAttribute(<span class="string">'name'</span>, id);</div><div class="line">  <span class="comment">// éšè— iframe</span></div><div class="line">  iframe.style.cssText = <span class="string">'display: none'</span>;</div><div class="line">  <span class="comment">// è®¾ç½® form çš„ target ä¸º iframe</span></div><div class="line">  myform.setAttribute(<span class="string">'target'</span>, id);</div><div class="line">  <span class="comment">// å°† iframe æ’å…¥</span></div><div class="line">  <span class="built_in">document</span>.body.appendChild(iframe);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œä¸è¿‡æœåŠ¡å™¨æˆåŠŸæ¥æ”¶æ•°æ®åè¿”å›éœ€è¦è¿”å›ä¸€æ®µæ•°æ®ï¼Œè¿™é‡Œä¸€èˆ¬æ˜¯è¦è§¦å‘ä¸€ä¸ªå›è°ƒï¼Œæˆ‘ä»¬å¯ä»¥ä¸æœåŠ¡å™¨é¢„å…ˆçº¦å®šå¥½å›è°ƒå‡½æ•°çš„åå­—ï¼Œæˆ–è€…åœ¨ä¸Šä¼ è¡¨å•çš„ <code>URL</code> ä¸­åŠ å‚æ•°ä¹‹ç±»çš„ï¼Œåæ­£è®©æœåŠ¡å™¨ç«¯çŸ¥é“å›è°ƒå‡½æ•°çš„åå­—å°±å¥½äº†ï¼Œä¸€èˆ¬å¯ä»¥è¿™æ ·è¿”å›ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">res.write(<span class="string">'&lt;script&gt;window.top.callback("somedata")&lt;/script&gt;'</span>);</div><div class="line">res.end();</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±ä¼šè°ƒç”¨ <code>callback</code> å‡½æ•°äº†ï¼Œ<code>iframe</code> å¼‚æ­¥ä¸Šä¼ è¡¨å•çš„ä¼˜ç‚¹æ˜¯å…¼å®¹æ€§è¾ƒé«˜ã€‚ä¸‹é¢å†çœ‹çœ‹å¦ä¸€ç§å¼‚æ­¥ä¸Šä¼ è¡¨å•çš„æ–¹å¼ã€‚</p>
<h2 id="AJAX-ä¸Šä¼ "><a href="#AJAX-ä¸Šä¼ " class="headerlink" title="AJAX ä¸Šä¼ "></a>AJAX ä¸Šä¼ </h2><p><code>XMLHttpRequest</code> å¯¹è±¡ç¬¬äºŒç‰ˆæ”¯æŒå¼‚æ­¥ä¸Šä¼ æ–‡ä»¶ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨ <code>FormData</code>ï¼Œç„¶åå‘æœåŠ¡å™¨ç«¯å‘é€æ•°æ®ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> FormData();</div><div class="line">formData.append(<span class="string">'myfile'</span>, <span class="built_in">document</span>.getElementById(<span class="string">'myfile'</span>).files[<span class="number">0</span>]);</div><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">xhr.open(<span class="string">'POST'</span>, <span class="string">'/someurl'</span>);</div><div class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</div><div class="line">    <span class="comment">// ä¸Šä¼ æˆåŠŸ</span></div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// å‡ºç°é”™è¯¯</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">xhr.send(formData);</div></pre></td></tr></table></figure>
<p>å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå¹¶ä¸”ååˆ†å¼ºå¤§ã€‚</p>
<p>å¦å¤–ï¼Œå€ŸåŠ© <code>File API</code> + <code>AJAX</code> çš„æ–¹å¼ï¼Œè¿˜èƒ½å®ç°æ›´å¤šé«˜çº§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ–­ç‚¹ç»­ä¼ ï¼Œæ€è·¯å°±æ˜¯ä½¿ç”¨ <code>File.prototype.slice</code> å°†æ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªç‰‡æ®µï¼Œç„¶åä½¿ç”¨ <code>AJAX</code> ä¼ é€ç‰‡æ®µï¼Œå¦‚æœä¸€ä¸ªç‰‡æ®µä¼ é€æˆåŠŸäº†å°±ä¼ é€ä¸‹ä¸€ä¸ªç‰‡æ®µã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/02/27/drag/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/27/drag/" itemprop="url">
                  drag
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-27T13:13:14+08:00">
                2017-02-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å­¦ä¹ ç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä¹ ç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/27/drag/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/27/drag/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h2><p>å½“æ‹–åŠ¨æŸä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œå°†ä¼šå…ˆåè§¦å‘ <code>dragstart</code>ï¼Œ<code>drag</code>ï¼Œ<code>dragend</code> äº‹ä»¶ã€‚</p>
<p>å½“æŸä¸ªå…ƒç´ è¢«æ‹–åˆ°æœ‰æ•ˆæ”¾ç½®ç›®æ ‡ä¸Šæ—¶ï¼Œå…ˆåè§¦å‘ <code>dragenter</code>ï¼Œ<code>dragover</code>ï¼Œ<code>drop</code>æˆ–<code>dragleave</code>ã€‚</p>
<p>æŸäº›å…ƒç´ ä¸å…è®¸è¢«æ”¾ç½®ï¼Œè¿™ä¸ªæ—¶å€™å–æ¶ˆè¿™äº›å…ƒç´  <code>dragenter</code> å’Œ <code>dragover</code> çš„é»˜è®¤è¡Œä¸ºå°±å¯ä»¥å°†è¯¥å…ƒç´ è½¬ä¸ºå¯è¢«æ”¾ç½®çš„ç›®æ ‡ã€‚</p>
<p>å¦å¤–ï¼Œä¸€äº›å…ƒç´ æœ‰é»˜è®¤çš„æ”¾ç½®è¡Œä¸ºï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°† <code>drop</code> çš„é»˜è®¤è¡Œä¸ºå»é™¤å°±è¡Œäº†ã€‚</p>
<p>è¦æŠŠä¸€ä¸ªå…ƒç´ è®¾ç½®ä¸ºå¯æ‹–åŠ¨çš„ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹è®¾ç½®ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">"true"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2017/02/27/drag/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/02/19/add-operator/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/19/add-operator/" itemprop="url">
                  åŠ å·æ“ä½œç¬¦
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-19T17:50:55+08:00">
                2017-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å­¦ä¹ ç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä¹ ç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/19/add-operator/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/19/add-operator/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åŠ æ³•æ“ä½œç¬¦çš„è§„åˆ™ï¼š</p>
<ol>
<li>å¦‚æœæ“ä½œç¬¦ä¸­æœ‰ä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œå°†å…¶è½¬æ¢ä¸ºåŸå§‹å€¼</li>
<li>å¦‚æœæ“ä½œæ•°ä¸­æœ‰ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œå°†å¦ä¸€ä¸ªä¹Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åè¿æ¥</li>
<li>å…¶ä»–æƒ…å†µä¸‹ï¼Œå°†ä¸¤ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—å¹¶æ‰§è¡ŒåŠ æ³•è¿ç®—</li>
</ol>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹ç¬¬ä¸€æ¡è§„åˆ™ï¼Œå¦‚æœæ“ä½œç¬¦ä¸­æœ‰ä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œå°†å…¶è½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œé‚£ä¹ˆï¼Œæ˜¯å¦‚ä½•è½¬æ¢çš„å‘¢ï¼Ÿ</p>
<ol>
<li>å¦‚æœå¯¹è±¡æ˜¯ <code>Date</code> ç±»å‹çš„è¯ï¼Œä½¿ç”¨ <code>toString()</code> è½¬æ¢ä¸ºå­—ç¬¦ä¸²</li>
<li>å…¶ä»–å¯¹è±¡çš„è¯ä¼šå…ˆè°ƒç”¨ <code>valueOf()</code>ï¼Œå¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªåŸå§‹å€¼å¾—è¯ï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªåŸå§‹å€¼ï¼Œå¦åˆ™è¿›å…¥ç¬¬ä¸‰éƒ¨</li>
<li>è°ƒç”¨ <code>toString()</code> æ–¹æ³•</li>
</ol>
<p>å¥½äº†ï¼Œæˆ‘ä»¬å†çœ‹å‡ ä¸ªä¾‹å­</p>
<h3 id="ä¾‹å­1"><a href="#ä¾‹å­1" class="headerlink" title="ä¾‹å­1"></a>ä¾‹å­1</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ret = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] + <span class="number">4</span>; <span class="comment">// '1,2,34'</span></div></pre></td></tr></table></figure>
<p><code>[1, 2, 3]</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å…ˆè°ƒç”¨ <code>valueOf()</code>ï¼Œä½† å‡½æ•°è¿”å›çš„æ˜¯æ•°ç»„æœ¬èº«ï¼Œä¸æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œå› æ­¤å†è°ƒç”¨ <code>toString()</code>ï¼Œè¿”å›å­—ç¬¦ä¸²<code>&#39;1,2,3&#39;</code>ã€‚</p>
<p>æ­¤æ—¶è¡¨è¾¾å¼å˜ä¸º <code>&#39;1,2,3&#39; + 4</code>ï¼Œæ­¤æ—¶ä½¿ç”¨ç¬¬äºŒæ¡è§„åˆ™ï¼Œå°†æ•°å­—<code>4</code>è½¬åŒ–ä¸ºå­—ç¬¦ä¸²<code>&#39;4&#39;</code>ã€‚</p>
<p>æ­¤æ—¶è¡¨è¾¾å¼å˜ä¸º<code>&#39;1,2,3&#39; + &#39;4&#39;</code>ï¼Œç»“æœä¸º<code>1,2,34</code>ã€‚</p>
<h3 id="ä¾‹å­2"><a href="#ä¾‹å­2" class="headerlink" title="ä¾‹å­2"></a>ä¾‹å­2</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ret = [] + <span class="number">1</span>; <span class="comment">// '1'</span></div></pre></td></tr></table></figure>
<p><code>[]</code>è½¬æ¢ä¸ºå­—ç¬¦ä¸²<code>&#39;&#39;</code>ï¼Œ<code>1</code>è½¬æ¢ä¸º<code>&#39;1&#39;</code>ï¼Œå› æ­¤ç»“æœä¸º<code>&#39;1&#39;</code></p>
<h3 id="ä¾‹å­3"><a href="#ä¾‹å­3" class="headerlink" title="ä¾‹å­3"></a>ä¾‹å­3</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ret = <span class="literal">true</span> + <span class="number">1</span> <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>æ‰§è¡Œç¬¬ä¸‰æ¡è§„åˆ™ï¼Œ<code>true</code>è½¬æ¢ä¸º<code>1</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/01/05/solve-problem-cannot-overwrite-model-once-compiled/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/05/solve-problem-cannot-overwrite-model-once-compiled/" itemprop="url">
                  mongoose Cannot overwrite model once compiled
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-05T14:35:12+08:00">
                2017-01-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å­¦ä»¥è‡´ç”¨/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä»¥è‡´ç”¨</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/05/solve-problem-cannot-overwrite-model-once-compiled/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/05/solve-problem-cannot-overwrite-model-once-compiled/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¹‹å‰ä½¿ç”¨äº† <a href="https://github.com/wssgcg1213/koa2-react-isomorphic-boilerplate" target="_blank" rel="external">koa2-react-isomorphic-boilerplate</a> ä½œä¸ºç¼–å†™å‰åç«¯åŒæ„åº”ç”¨ï¼Œä½†æ˜¯ä½¿ç”¨è¿™ä¸ª boilerplate çš„æ—¶å€™å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªåº“ <code>mongoose</code>ï¼Œæ¯æ¬¡åœ¨ <code>development</code> æ¨¡å¼ä¸‹ä¿®æ”¹ä»£ç çš„æ—¶å€™å°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œé”™è¯¯åŸå› å°±æ˜¯ <code>Cannot overwrite model once compiled.</code>ï¼Œç„¶ååªèƒ½è‡ªå·±é‡å¯æœåŠ¡å™¨ã€‚ </p>
<p>ç„¶åå°±å°±æƒ³ç€è¦ä¸å°±ä¿®æ”¹ä»£ç ä¹‹åé‡å¯æœåŠ¡å™¨å§ã€‚ä¹‹ååˆå‚è€ƒäº†å‡ ä¸ªå‰åç«¯åŒæ„çš„ boilerplateï¼Œè‡ªå·±å†™äº†ä¸ª boilerplateï¼Œå¤§æ¦‚å°±æ˜¯æœåŠ¡å™¨ç«¯ä»£ç ä¿®æ”¹æ—¶å€™è‡ªåŠ¨é‡å¯ï¼Œå®¢æˆ·ç«¯ä»£ç ä¿®æ”¹è¿›è¡Œçƒ­æ›¿æ¢ã€‚ç„¶è€Œï¼Œè¿™å¸¦æ¥çš„ä¸€ä¸ªé—®é¢˜æ˜¯å®¢æˆ·ç«¯ä»£ç ä¿®æ”¹ä¹‹åï¼Œå½“åˆ·æ–°é¡µé¢æ—¶å€™æœåŠ¡ç«¯è¿”å›çš„htmlä¸å®¢æˆ·ç«¯ç”Ÿæˆçš„æ˜¯ä¸ä¸€è‡´çš„ï¼Œåœ¨è¿™ä¸ª <a href="https://github.com/chikara-chan/react-isomorphic-boilerplate/issues/1#issuecomment-270562613" target="_blank" rel="external">issue</a> ä¸­æˆ‘æœ‰æåˆ°ã€‚æ¥ç€æˆ‘çªç„¶æƒ³åˆ°ï¼Œ<a href="https://github.com/wssgcg1213/koa2-react-isomorphic-boilerplate" target="_blank" rel="external">koa2-react-isomorphic-boilerplate</a> æ˜¯å¯ä»¥åœ¨å®¢æˆ·ç«¯ä»£ç ä¿®æ”¹åä¹Ÿä¿®æ”¹æœåŠ¡å™¨ç«¯è¿”å›çš„ä»£ç çš„ï¼Œå…·ä½“å®ç°å°±æ˜¯é€šè¿‡æ¸…é™¤ <code>require</code> ç¼“å­˜ï¼Œè‡³äºä¸ºä»€ä¹ˆ <code>mongoose</code> ä¼šæŠ¥è¿™ä¸ªé‡å¤å®šä¹‰çš„é”™å‘¢ï¼Œæˆ‘å†æ¬¡æŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼Œå‘ç° <code>mongoose</code> ä¼šç¼“å­˜ <code>model</code> å’Œ <code>modelSchema</code> åœ¨ <code>mongoose.models</code> å’Œ <code>mongoose.modelSchemas</code> ä¸Šé¢ï¼Œå½“æ¸…é™¤ <code>require</code> çš„ç¼“å­˜ä¹‹åï¼Œ<code>mongoose.models</code> é‡Œé¢çš„ä¸œè¥¿è¿˜åœ¨ï¼Œç„¶åå†æ¬¡ <code>require</code> æ¨¡å‹çš„æ—¶å€™å°±æŠ¥é”™äº†ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘é€šè¿‡åœ¨ç›‘å¬æ–‡ä»¶å˜åŠ¨çš„ä»£ç é‡Œå†åŠ ä¸Šä¸‹é¢çš„ä»£ç æ¥æ¸…é™¤ <code>mongoose</code> ä¸­çš„ç¼“å­˜ï¼ŒæˆåŠŸåœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.keys(mongoose.models).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">model</span>) </span>&#123;</div><div class="line">  <span class="keyword">delete</span> mongoose.models[model];</div><div class="line">&#125;)</div><div class="line"><span class="built_in">Object</span>.keys(mongoose.modelSchemas).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">schema</span>) </span>&#123;</div><div class="line">  <span class="keyword">delete</span> mongoose.modelSchemas[schema];</div><div class="line">&#125;)</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2017/01/04/solve-problem-property-key-of-objectproperty/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/04/solve-problem-property-key-of-objectproperty/" itemprop="url">
                  è§£å†³ Property key of ObjectProperty expected node to be of a type ["Identifier","StringLiteral","NumericLiteral"] but instead got "BooleanLiteral" çš„é—®é¢˜
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-04T23:45:31+08:00">
                2017-01-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å­¦ä»¥è‡´ç”¨/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä»¥è‡´ç”¨</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/04/solve-problem-property-key-of-objectproperty/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/04/solve-problem-property-key-of-objectproperty/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>ä»Šå¤©åœ¨å†™ <a href="https://github.com/zhuscat/react-koa-isomorphic-boilerplate">react-koa-isomorphic-boilerplate</a>ï¼ŒæœŸé—´å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œé”™è¯¯åŸå› æ˜¯ <code>Property key of ObjectProperty expected node to be of a type [&quot;Identifier&quot;,&quot;StringLiteral&quot;,&quot;NumericLiteral&quot;] but instead got &quot;BooleanLiteral&quot;</code>ï¼Œå¾ˆå¿«å°±æ‰¾åˆ°é”™è¯¯æ‰€åœ¨çš„åœ°æ–¹ï¼Œä½†æ˜¯ä¸€ç›´ä¸çŸ¥é“å¦‚ä½•è§£å†³è¿™ä¸ªé”™è¯¯ï¼Œç„¶åé€šè¿‡å„ç§å°è¯•æ€»ç®—æ˜¯è§£å†³äº†è¿™ä¸ªé”™è¯¯ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸çŸ¥é“é”™è¯¯çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Œæ‰¾ä¸ªæ—¶é—´ç ”ç©¶ä¸€ä¸‹ï¼Œä¸‹é¢å°±è¯¦ç»†ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé—®é¢˜çš„è§£å†³åŠæ³•å§ã€‚</p>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2017/01/04/solve-problem-property-key-of-objectproperty/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://zhuscat.com/2016/12/31/2016-movie-book/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="zhuscat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="ZhusCafe">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="ZhusCafe" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/31/2016-movie-book/" itemprop="url">
                  2016å¹´æˆ‘çš„å½±è§†ä¸ä¹¦ç±
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-31T21:08:56+08:00">
                2016-12-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç”Ÿæ´»/" itemprop="url" rel="index">
                    <span itemprop="name">ç”Ÿæ´»</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/31/2016-movie-book/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/31/2016-movie-book/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>æ–°çš„ä¸€å¹´å°±è¦æ¥äº†ï¼Œæƒ³èµ·åšå®¢å¼€é€šä¹Ÿæœ‰1å¹´å¤šçš„æ—¶é—´äº†å§ã€‚å¹´æœ«ï¼Œå†™ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹è¿™ä¸€å¹´æ¥æˆ‘çœ‹çš„å½±ç‰‡ä¸ä¹¦å§ã€‚</p>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/12/31/2016-movie-book/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="zhuscat" />
          <p class="site-author-name" itemprop="name">zhuscat</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">68</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">68</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhuscat" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/iwenzhou" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/48336573/" target="_blank" title="Douban">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Douban
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://segmentfault.com/u/zhuscat" target="_blank" title="SegmentFault">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  SegmentFault
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/users/6781541/zhuscat" target="_blank" title="StackOverflow">
                  
                    <i class="fa fa-fw fa-stack-overflow"></i>
                  
                  StackOverflow
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhuscat</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhuscat"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  


</body>
</html>
